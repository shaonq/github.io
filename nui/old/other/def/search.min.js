!function(win){var f={},load_one,as={box:"#mk_search",id:"mk_search"};f.each=function(t,o){for(var e=0,n=t.length;n>e&&o(e,t[e])!==!1;e++);},f.UI=function(){if(!$(as.box)[0]&&!load_one){var t=document.createElement("ul");t.id=as.id,document.getElementsByTagName("body")[0].appendChild(t);var o='#mk_search:before { content: ""; position: absolute; } #mk_search {display:none;position: absolute;-webkit-transition: .5s; transition: .5s;top: 37px; left: 0; width: 215px; background-color: #fff; font-size: 13px;color:#999;    border: 1px solid #ddd;border-bottom-color: #bbb; } #mk_search li {     line-height: 22px; overflow: hidden; cursor: pointer; padding: 1px 6px; } #mk_search li:hover {     color: #666; background-color: #FFF8E1; }';return $("head").append("<style>"+o+"</style>"),load_one=!0,!0}}(),f.box=function(msg,options){var that=$(this),box=$(as.box),str="",arr=[];try{msg=eval("("+msg+")")}catch(e){}if(msg.data)if(box.css({top:that.offset().top+this.offsetHeight,left:that.offset().left,width:this.offsetWidth-2}),0!==msg.data.length)f.each(msg.data,function(t,o){str+="object"==typeof o?"<li>"+o[0]+"</li>":"<li>"+o+"</li>",arr.push(o)}),box.html(str).show(),box.find("li").each(function(t){$(this).on("click",function(){that.val($(this).text()),"object"!=typeof options?$(options)[0]&&arr[t].length>1&&$(options).val(arr[t][1]):f.each(options,function(o,e){$(e)[0]&&$(e).val(arr[t][++o])}),box.hide()})}),$("body").on("click",function(){box.hide()});else{var help=$("<li style='color: #888'>没有匹配项...</li>");box.html(help).show(),help.on("click",function(){box.fadeOut(),that.val("")})}},f.init=function(t,o){var e=this,n=this.getAttribute("name"),i=t.data||{};return i[n]=this.value,$.ajax({type:t.type||"get",url:t.url,data:i,dataType:"json",success:function(t){f.box.call(e,t,o)},error:function(t){win.console&&console.error("搜索插件错误提示：",t)}})};var search;search=function(t,o,e){o=o||{},e=e||{},f.init.call(t,o,e)},search.v="2.0","function"==typeof define?define(function(t,o,e){return e.exports=search,search}):win.search=search}(window);