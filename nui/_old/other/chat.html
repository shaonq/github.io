<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>search 简易聊天插件</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="../../resource/nui.min.css">
    <link rel="stylesheet" href="../css/ing.css">
    <link rel='stylesheet' href="../css/layout.css">
    <link rel="stylesheet" href="../css/chat.css">
</head>
<body>
<div class="header">
    <ul class="main">
        <li class="menu">
            <a href="date.html">小型日历插件</a>
            <a href="search.html">异步搜索插件</a>
            <a class="this" href="chat.html">简易聊天插件</a>
            <a href="nodejs.html">nodeJs</a>
        </li>
    </ul>
</div>

<div class="main layout-main">
    <div class="layout-side">
        <ul class="tree">
            <li class="this"><a href="#qianyan">前言</a></li>
            <li><a href="#api_demo">举个例子</a></li>
            <li><a href="#WebSocket">WebSocket</a></li>
        </ul>
    </div>
    <div class="layout-warp">
        <div class="floor">
            <fieldset class="h1" id="qianyan">
                <legend>前言</legend>
            </fieldset>
            <div class="content">
                web端即时通讯
            </div>
        </div>
        <div class="floor">
            <fieldset class="h1" id="api_demo">
                <legend>举个例子</legend>
            </fieldset>
            <div class="content" style="    border: 1px solid #D9D9D9;padding: 15px">
                <div class="chat-head">
                    <img src="http://placeholder.qiniudn.com/60x60/33cc99/33cc99">
                    <h2 class="chat-head-title">管理员</h2>
                    <span class="chat-head-text">你有什么要说的</span>
                </div>
                <div class="chat-main">
                    <ul>
                        <li>
                            <div class="chat-main-user"><img
                                    src="http://placeholder.qiniudn.com/40x40/33cc99/33cc99"><cite><i>2016-6-22
                                3:43:02</i> 管理员 </cite></div>
                            <div class="chat-main-text">我们来聊天吧~</div>
                        </li>
                    </ul>
                </div>
                <div class="chat-tools"><i></i>
                    <div class="chat-tool-log">聊天记录</div>
                    <textarea class="chat-tool-textarea" placeholder="说点什么试试"></textarea>
                    <div class="chat-tool-bottom">
                        <span>发送消息</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="floor">
            <fieldset class="h1" id="WebSocket">
                <legend>其他</legend>
            </fieldset>
            <div class="content">
                WebSocket 高效的服务端/客户端交互。
                使用 Nodejs + socket.io配置
                <p>服务端</p>
<pre>
    //安装nodejs
    // npm install express socket.io -save
    // 配置server
    var app = require('express')()
        , server = require('http').createServer(app)
        , io = require('socket.io').listen(server);
    server.listen(3001);
    io.on('connection', function (socket) {
        console.log('WebSocket connected');
        console.log(socket.connected);
        socket.on('message', function (d) {
            console.log(socket.id);
            socket.send(d);//("message")
        }).on('disconnect', function () {
            console.log('WebSocket disconnect');
        });
    });
</pre>
                <p>客户端</p>
 <pre>
    var socket, fn = function () {
        socket = io('ws://192.168.1.22:3001');
        socket.on('connect', function () {
            console.log("WebSocket connect");
            socket.on('message', function (d) {
                console.log(d);
            });
        });
    };
    nui.loadJs("/download/socket.io.js",fn);
</pre>
            </div>
        </div>
    </div>
</div>
<script src="def/jquery.min.js"></script>
<script src="../../resource/nui.min.js"></script>
<script src="../js/ing.js"></script>
<script src="def/chat.js"></script>
<script src="def/all.js"></script>
</body>