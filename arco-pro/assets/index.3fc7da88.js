import{b as U,_ as k}from"./index.39de13af.js";/* empty css              *//* empty css              *//* empty css              */import{d as w,e as b,A as v,aC as g,aF as o,aG as t,E as V,aM as p,aL as s,b1 as S,b2 as T,bu as N,bv as q,bC as R,aT as C,b7 as L,aR as A,bB as E,b6 as I,B as x,bb as D,bc as P,b5 as z,bo as j,aJ as G,aD as J,bD as K,u as O,bE as Z,bF as H,bj as Q,bk as W}from"./arco.634a02a4.js";import{u as X}from"./loading.a603a303.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./chart.a55f755a.js";import"./vue.8bc1e739.js";function Y(y){return U.post("/api/channel-form/submit",{data:y})}const ee=s("APP\u901A\u7528\u6E20\u9053"),te=w({__name:"base-info",emits:["changeStep"],setup(y,{emit:_}){const d=b(),e=b({activityName:"",channelType:"",promotionTime:[],promoteLink:"https://arco.design"}),c=async()=>{var a;await((a=d.value)==null?void 0:a.validate())||_("changeStep","forward",{...e.value})};return(l,a)=>{const r=S,n=T,i=N,u=q,h=R,$=C,F=L;return v(),g(F,{ref_key:"formRef",ref:d,model:e.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:o(()=>[t(n,{field:"activityName",label:l.$t("stepForm.form.label.activityName"),rules:[{required:!0,message:l.$t("stepForm.form.error.activityName.required")},{match:/^[a-zA-Z0-9\u4e00-\u9fa5]{1,20}$/,message:l.$t("stepForm.form.error.activityName.pattern")}]},{default:o(()=>[t(r,{modelValue:e.value.activityName,"onUpdate:modelValue":a[0]||(a[0]=m=>e.value.activityName=m),placeholder:l.$t("stepForm.placeholder.activityName")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"channelType",label:l.$t("stepForm.form.label.channelType"),rules:[{required:!0,message:l.$t("stepForm.form.error.channelType.required")}]},{default:o(()=>[t(u,{modelValue:e.value.channelType,"onUpdate:modelValue":a[1]||(a[1]=m=>e.value.channelType=m),placeholder:l.$t("stepForm.placeholder.channelType")},{default:o(()=>[t(i,null,{default:o(()=>[ee]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"promotionTime",label:l.$t("stepForm.form.label.promotionTime"),rules:[{required:!0,message:l.$t("stepForm.form.error.promotionTime.required")}]},{default:o(()=>[t(h,{modelValue:e.value.promotionTime,"onUpdate:modelValue":a[2]||(a[2]=m=>e.value.promotionTime=m)},null,8,["modelValue"])]),_:1},8,["label","rules"]),t(n,{field:"promoteLink",label:l.$t("stepForm.form.label.promoteLink"),rules:[{required:!0,message:l.$t("stepForm.form.error.promoteLink.required")},{type:"url",message:l.$t("stepForm.form.error.promoteLink.pattern")}],"row-class":"keep-margin"},{help:o(()=>[V("span",null,p(l.$t("stepForm.form.tip.promoteLink")),1)]),default:o(()=>[t(r,{modelValue:e.value.promoteLink,"onUpdate:modelValue":a[3]||(a[3]=m=>e.value.promoteLink=m),placeholder:l.$t("stepForm.placeholder.promoteLink")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,null,{default:o(()=>[t($,{type:"primary",onClick:c},{default:o(()=>[s(p(l.$t("stepForm.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});var ae=k(te,[["__scopeId","data-v-1845ccc4"]]);const oe=s("\u4ECA\u65E5\u5934\u6761"),re=s("\u706B\u5C71"),le=w({__name:"channel-info",emits:["changeStep"],setup(y,{emit:_}){const d=b(),e=b({advertisingSource:"",advertisingMedia:"",keyword:[],pushNotify:!0,advertisingContent:""}),c=async()=>{var r;await((r=d.value)==null?void 0:r.validate())||_("changeStep","submit",{...e.value})},l=()=>{_("changeStep","backward")};return(a,r)=>{const n=S,i=T,u=N,h=q,$=A,F=E,m=C,B=I,M=L;return v(),g(M,{ref_key:"formRef",ref:d,model:e.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:o(()=>[t(i,{field:"advertisingSource",label:a.$t("stepForm.form.label.advertisingSource"),rules:[{required:!0,message:a.$t("stepForm.form.error.advertisingSource.required")}]},{default:o(()=>[t(n,{modelValue:e.value.advertisingSource,"onUpdate:modelValue":r[0]||(r[0]=f=>e.value.advertisingSource=f),placeholder:a.$t("stepForm.placeholder.advertisingSource")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(i,{field:"advertisingMedia",label:a.$t("stepForm.form.label.advertisingMedia"),rules:[{required:!0,message:a.$t("stepForm.form.error.advertisingMedia.required")}]},{default:o(()=>[t(n,{modelValue:e.value.advertisingMedia,"onUpdate:modelValue":r[1]||(r[1]=f=>e.value.advertisingMedia=f),placeholder:a.$t("stepForm.placeholder.advertisingMedia")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(i,{field:"keyword",label:a.$t("stepForm.form.label.keyword"),rules:[{required:!0,message:a.$t("stepForm.form.error.keyword.required")}]},{default:o(()=>[t(h,{modelValue:e.value.keyword,"onUpdate:modelValue":r[2]||(r[2]=f=>e.value.keyword=f),placeholder:a.$t("stepForm.placeholder.keyword"),multiple:""},{default:o(()=>[t(u,null,{default:o(()=>[oe]),_:1}),t(u,null,{default:o(()=>[re]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(i,{field:"pushNotify",label:a.$t("stepForm.form.label.pushNotify"),rules:[{required:!0}]},{default:o(()=>[t($,{modelValue:e.value.pushNotify,"onUpdate:modelValue":r[3]||(r[3]=f=>e.value.pushNotify=f)},null,8,["modelValue"])]),_:1},8,["label"]),t(i,{field:"advertisingContent",label:a.$t("stepForm.form.label.advertisingContent"),rules:[{required:!0,message:a.$t("stepForm.form.error.advertisingContent.required")},{maxLength:200,message:a.$t("stepForm.form.error.advertisingContent.maxLength")}],"row-class":"keep-margin"},{default:o(()=>[t(F,{modelValue:e.value.advertisingContent,"onUpdate:modelValue":r[4]||(r[4]=f=>e.value.advertisingContent=f),placeholder:a.$t("stepForm.placeholder.advertisingContent")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(i,null,{default:o(()=>[t(B,null,{default:o(()=>[t(m,{type:"secondary",onClick:l},{default:o(()=>[s(p(a.$t("stepForm.button.prev")),1)]),_:1}),t(m,{type:"primary",onClick:c},{default:o(()=>[s(p(a.$t("stepForm.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});var ne=k(le,[["__scopeId","data-v-e3a691f8"]]);const se={class:"success-wrap"},pe={class:"details-wrapper"},ie=w({__name:"success",emits:["changeStep"],setup(y,{emit:_}){const d=()=>{_("changeStep",1)};return(e,c)=>{const l=D,a=C,r=I,n=P,i=z,u=j;return v(),x("div",se,[t(l,{status:"success",title:e.$t("stepForm.success.title"),subtitle:e.$t("stepForm.success.subTitle")},null,8,["title","subtitle"]),t(r,{size:16},{default:o(()=>[t(a,{key:"view",type:"primary"},{default:o(()=>[s(p(e.$t("stepForm.button.view")),1)]),_:1}),t(a,{key:"again",type:"secondary",onClick:d},{default:o(()=>[s(p(e.$t("stepForm.button.again")),1)]),_:1})]),_:1}),V("div",pe,[t(n,{heading:6,style:{"margin-top":"0"}},{default:o(()=>[s(p(e.$t("stepForm.form.description.title")),1)]),_:1}),t(u,{style:{"margin-bottom":"0"}},{default:o(()=>[s(p(e.$t("stepForm.form.description.text"))+" ",1),t(i,{href:"link"},{default:o(()=>[s(p(e.$t("stepForm.button.view")),1)]),_:1})]),_:1})])])}}});var me=k(ie,[["__scopeId","data-v-6f9d957b"]]);const de={class:"container"},ue={class:"wrapper"},ce={name:"Step"},fe=w({...ce,setup(y){const{loading:_,setLoading:d}=X(!1),e=b(1),c=b({}),l=async()=>{d(!0);try{await Y(c.value),e.value=3,c.value={}}catch{}finally{d(!1)}},a=(r,n)=>{if(typeof r=="number"){e.value=r;return}if(r==="forward"||r==="submit"){if(c.value={...c.value,...n},r==="submit"){l();return}e.value+=1}else r==="backward"&&(e.value-=1)};return(r,n)=>{const i=G("Breadcrumb"),u=Z,h=H,$=Q,F=W;return v(),x("div",de,[t(i,{items:["menu.form","menu.form.step"]},null,8,["items"]),t(F,{loading:O(_),style:{width:"100%"}},{default:o(()=>[t($,{class:"general-card"},{title:o(()=>[s(p(r.$t("stepForm.step.title")),1)]),default:o(()=>[V("div",ue,[t(h,{current:e.value,"onUpdate:current":n[0]||(n[0]=m=>e.value=m),style:{width:"580px"},"line-less":"",class:"steps"},{default:o(()=>[t(u,{description:r.$t("stepForm.step.subTitle.baseInfo")},{default:o(()=>[s(p(r.$t("stepForm.step.title.baseInfo")),1)]),_:1},8,["description"]),t(u,{description:r.$t("stepForm.step.subTitle.channel")},{default:o(()=>[s(p(r.$t("stepForm.step.title.channel")),1)]),_:1},8,["description"]),t(u,{description:r.$t("stepForm.step.subTitle.finish")},{default:o(()=>[s(p(r.$t("stepForm.step.title.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(v(),g(K,null,[e.value===1?(v(),g(ae,{key:0,onChangeStep:a})):e.value===2?(v(),g(ne,{key:1,onChangeStep:a})):e.value===3?(v(),g(me,{key:2,onChangeStep:a})):J("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});var Be=k(fe,[["__scopeId","data-v-749b379a"]]);export{Be as default};
