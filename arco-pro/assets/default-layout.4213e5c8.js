var ze=Object.defineProperty,Pe=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var oe=(t,e,a)=>e in t?ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,K=(t,e)=>{for(var a in e||(e={}))te.call(e,a)&&oe(t,a,e[a]);if(H)for(var a of H(e))ne.call(e,a)&&oe(t,a,e[a]);return t},se=(t,e)=>Pe(t,Ae(e));var ae=(t,e)=>{var a={};for(var c in t)te.call(t,c)&&e.indexOf(c)<0&&(a[c]=t[c]);if(t!=null&&H)for(var c of H(t))e.indexOf(c)<0&&ne.call(t,c)&&(a[c]=t[c]);return a};import{a as X,_ as F,u as ce,c as z,d as Ve,L as Ne,e as Oe,f as Ue,g as re,l as le,h as ie}from"./index.bdb4060a.js";import{F as Ke}from"./index.8baeb72a.js";import{aS as ue,d as R,aJ as B,A as i,aC as x,aF as n,aG as s,E as p,aL as T,aM as M,C as Y,B as D,aH as J,D as W,aD as I,bT as We,aI as G,bs as qe,bf as de,bt as _e,b4 as pe,bo as He,bP as Je,bQ as Ge,b3 as Qe,bR as Xe,e as E,r as Ye,t as Ze,c as S,u as v,bb as et,by as tt,aT as fe,bz as nt,bk as ot,i as st,b8 as ge,b9 as ve,bU as at,bV as ct,bW as rt,bX as lt,bY as it,bZ as ut,b_ as dt,h as he,bx as ye,b$ as _t,c0 as pt,w as me,c1 as ft,c2 as gt,o as vt,c3 as ht,c4 as yt,bq as be,bD as mt,c5 as bt,p as kt,bH as xt,c6 as $t,c7 as Ct,aV as wt,c8 as Lt,c9 as St}from"./arco.820dc93e.js";import{f as Q,i as Mt,j as Bt,h as Tt,k as ke,l as Dt}from"./vue.52ac1cfb.js";/* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               */import{a as It,s as jt}from"./message.7f648656.js";import{u as Rt}from"./loading.31c807e3.js";/* empty css               *//* empty css               *//* empty css                *//* empty css               */import"./chart.70830779.js";function Et(){const t=Q(),e=X();return{logout:async c=>{await e.logout();const f=t.currentRoute.value;ue.success("\u767B\u51FA\u6210\u529F"),t.push({name:c&&typeof c=="string"?c:"login",query:se(K({},t.currentRoute.value.query),{redirect:f.name})})}}}const Ft=T("\u672A\u5F00\u59CB"),zt=T("\u5DF2\u5F00\u901A"),Pt=T("\u8FDB\u884C\u4E2D"),At=T("\u5373\u5C06\u5230\u671F"),Vt=["onClick"],Nt=["src"],Ot={class:"footer-wrap"},Ut={class:"footer-wrap"},Kt=R({props:{renderList:{type:Array,required:!0},unreadCount:{type:Number,default:0}},emits:["itemClick"],setup(t,{emit:e}){const a=t,c=()=>{e("itemClick",[...a.renderList])},f=h=>{h.status||e("itemClick",[h])},d=3;return(h,m)=>{const C=qe,r=B("icon-desktop"),$=de,w=_e,l=pe,g=He,b=Je,o=Ge,_=Qe,k=Xe;return i(),x(k,{bordered:!1},{footer:n(()=>[s(l,{fill:"",size:0,class:Y({"add-border-top":t.renderList.length<d})},{default:n(()=>[p("div",Ot,[s(_,{onClick:c},{default:n(()=>[T(M(h.$t("messageBox.allRead")),1)]),_:1})]),p("div",Ut,[s(_,null,{default:n(()=>[T(M(h.$t("messageBox.viewMore")),1)]),_:1})])]),_:1},8,["class"])]),default:n(()=>[(i(!0),D(G,null,J(t.renderList,y=>(i(),x(o,{key:y.id,"action-layout":"vertical",style:W({opacity:y.status?.5:1})},{extra:n(()=>[y.messageType===0?(i(),x(C,{key:0,color:"gray"},{default:n(()=>[Ft]),_:1})):y.messageType===1?(i(),x(C,{key:1,color:"green"},{default:n(()=>[zt]),_:1})):y.messageType===2?(i(),x(C,{key:2,color:"blue"},{default:n(()=>[Pt]),_:1})):y.messageType===3?(i(),x(C,{key:3,color:"red"},{default:n(()=>[At]),_:1})):I("",!0)]),default:n(()=>[p("div",{class:"item-wrap",onClick:L=>f(y)},[s(b,null,We({title:n(()=>[s(l,{size:4},{default:n(()=>[p("span",null,M(y.title),1),s(w,{type:"secondary"},{default:n(()=>[T(M(y.subTitle),1)]),_:2},1024)]),_:2},1024)]),description:n(()=>[p("div",null,[s(g,{ellipsis:{rows:1}},{default:n(()=>[T(M(y.content),1)]),_:2},1024),y.type==="message"?(i(),x(w,{key:0,class:"time-text"},{default:n(()=>[T(M(y.time),1)]),_:2},1024)):I("",!0)])]),_:2},[y.avatar?{name:"avatar",fn:n(()=>[s($,{shape:"circle"},{default:n(()=>[y.avatar?(i(),D("img",{key:0,src:y.avatar},null,8,Nt)):(i(),x(r,{key:1}))]),_:2},1024)])}:void 0]),1024)],8,Vt)]),_:2},1032,["style"]))),128)),t.renderList.length&&t.renderList.length<3?(i(),D("div",{key:0,style:W({height:(d-t.renderList.length)*86+"px"})},null,4)):I("",!0)]),_:1})}}});var Wt=F(Kt,[["__scopeId","data-v-e3e10b82"]]);const qt=R({setup(t){const{loading:e,setLoading:a}=Rt(!0),c=E("message"),{t:f}=ce(),d=Ye({renderList:[],messageList:[]});Ze(d);const h=[{key:"message",title:f("messageBox.tab.title.message")},{key:"notice",title:f("messageBox.tab.title.notice")},{key:"todo",title:f("messageBox.tab.title.todo")}];async function m(){a(!0);try{const{data:o}=await It();d.messageList=o}catch{}finally{a(!1)}}async function C(o){const _=o.map(k=>k.id);await jt({ids:_}),m()}const r=S(()=>d.messageList.filter(o=>c.value===o.type)),$=S(()=>r.value.filter(o=>!o.status).length),w=o=>d.messageList.filter(k=>k.type===o&&!k.status),l=o=>{const _=w(o);return _.length?`(${_.length})`:""},g=o=>{r.value.length&&C([...o])},b=()=>{d.messageList=[]};return m(),(o,_)=>{const k=et,y=tt,L=fe,j=nt,P=ot;return i(),x(P,{style:{display:"block"},loading:v(e)},{default:n(()=>[s(j,{activeKey:c.value,"onUpdate:activeKey":_[0]||(_[0]=u=>c.value=u),type:"rounded","destroy-on-hide":""},{extra:n(()=>[s(L,{type:"text",onClick:b},{default:n(()=>[T(M(o.$t("messageBox.tab.button")),1)]),_:1})]),default:n(()=>[(i(),D(G,null,J(h,u=>s(y,{key:u.key},{title:n(()=>[p("span",null,M(u.title)+M(l(u.key)),1)]),default:n(()=>[v(r).length?I("",!0):(i(),x(k,{key:0,status:"404"},{subtitle:n(()=>[T(M(o.$t("messageBox.noContent")),1)]),_:1})),s(Wt,{"render-list":v(r),"unread-count":v($),onItemClick:g},null,8,["render-list","unread-count"])]),_:2},1024)),64))]),_:1},8,["activeKey"])]),_:1},8,["loading"])}}});var Ht=F(qt,[["__scopeId","data-v-7322e26b"]]);const Jt=t=>(ge("data-v-4dbcfaa2"),t=t(),ve(),t),Gt={class:"navbar"},Qt=Jt(()=>p("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"},null,-1)),Xt=T(" Arco Pro "),Yt={class:"right-side"},Zt={class:"message-box-trigger"},en=["src"],tn=R({setup(t){const e=z(),a=X(),{logout:c}=Et(),{changeLocale:f}=Ve(),{isFullscreen:d,toggle:h}=Mt(),m=[...Ne],C=S(()=>e.menuCollapse?48:e.menuWidth),r=S(()=>a.avatar),$=S(()=>e.theme),w=Bt({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(u){e.toggleTheme(u)}}),l=Tt(w),g=()=>{l()},b=()=>{e.updateSettings({globalSettings:!0})},o=E(),_=E(),k=()=>{const u=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});o.value.dispatchEvent(u)},y=()=>{c()},L=()=>{const u=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});_.value.dispatchEvent(u)},j=async()=>{const u=await a.switchRoles();ue.success(u)},P=st("toggleDrawerMenu");return(u,q)=>{const $e=_e,Ce=B("icon-menu-fold"),A=pe,we=B("icon-language"),V=fe,N=at,O=ct,Z=rt,Le=B("icon-moon-fill"),Se=B("icon-sun-fill"),Me=B("icon-notification"),Be=lt,Te=it,De=B("icon-fullscreen-exit"),Ie=B("icon-fullscreen"),ee=B("icon-settings"),je=de,Re=B("icon-tag"),Ee=B("icon-user"),Fe=B("icon-export");return i(),D("div",Gt,[p("div",{class:"left-side layout-logo",style:W({width:v(C)+"px"})},[s(A,null,{default:n(()=>[Qt,s($e,{style:{margin:0,fontSize:"18px"},class:"layout-logo__name"},{default:n(()=>[Xt]),_:1}),v(e).device==="mobile"?(i(),x(Ce,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:v(P)},null,8,["onClick"])):I("",!0)]),_:1})],4),p("ul",Yt,[p("li",null,[s(N,{content:u.$t("settings.language")},{default:n(()=>[s(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:L},{icon:n(()=>[s(we)]),_:1})]),_:1},8,["content"]),s(Z,{trigger:"click",onSelect:v(f)},{content:n(()=>[(i(),D(G,null,J(m,U=>s(O,{key:U.value,value:U.value},{default:n(()=>[T(M(U.label),1)]),_:2},1032,["value"])),64))]),default:n(()=>[p("div",{ref_key:"triggerBtn",ref:_,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),p("li",null,[s(N,{content:v($)==="light"?u.$t("settings.navbar.theme.toDark"):u.$t("settings.navbar.theme.toLight")},{default:n(()=>[s(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:g},{icon:n(()=>[v($)==="dark"?(i(),x(Le,{key:0})):(i(),x(Se,{key:1}))]),_:1})]),_:1},8,["content"])]),p("li",null,[s(N,{content:u.$t("settings.navbar.alerts")},{default:n(()=>[p("div",Zt,[s(Be,{count:9,dot:""},{default:n(()=>[s(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:k},{default:n(()=>[s(Me)]),_:1})]),_:1})])]),_:1},8,["content"]),s(Te,{trigger:"click","arrow-style":{display:"none"},"content-style":{padding:0,minWidth:"400px"},"content-class":"message-popover"},{content:n(()=>[s(Ht)]),default:n(()=>[p("div",{ref_key:"refBtn",ref:o,class:"ref-btn"},null,512)]),_:1})]),p("li",null,[s(N,{content:v(d)?u.$t("settings.navbar.screen.toExit"):u.$t("settings.navbar.screen.toFull")},{default:n(()=>[s(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:v(h)},{icon:n(()=>[v(d)?(i(),x(De,{key:0})):(i(),x(Ie,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),p("li",null,[s(N,{content:u.$t("settings.title")},{default:n(()=>[s(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:b},{icon:n(()=>[s(ee)]),_:1})]),_:1},8,["content"])]),p("li",null,[s(Z,{trigger:"click"},{content:n(()=>[s(O,null,{default:n(()=>[s(A,{onClick:j},{default:n(()=>[s(Re),p("span",null,M(u.$t("messageBox.switchRoles")),1)]),_:1})]),_:1}),s(O,null,{default:n(()=>[s(A,{onClick:q[0]||(q[0]=U=>u.$router.push({name:"Info"}))},{default:n(()=>[s(Ee),p("span",null,M(u.$t("messageBox.userCenter")),1)]),_:1})]),_:1}),s(O,null,{default:n(()=>[s(A,{onClick:q[1]||(q[1]=U=>u.$router.push({name:"Setting"}))},{default:n(()=>[s(ee),p("span",null,M(u.$t("messageBox.userSettings")),1)]),_:1})]),_:1}),s(O,null,{default:n(()=>[s(A,{onClick:y},{default:n(()=>[s(Fe),p("span",null,M(u.$t("messageBox.logout")),1)]),_:1})]),_:1})]),default:n(()=>[s(je,{size:32,style:{marginRight:"8px",cursor:"pointer"}},{default:n(()=>[p("img",{alt:"avatar",src:v(r)},null,8,en)]),_:1})]),_:1})])])])}}});var nn=F(tn,[["__scopeId","data-v-4dbcfaa2"]]);const on=(t,e)=>{const f=e||{},{target:a="_blank"}=f,c=ae(f,["target"]);window.open(t,a,Object.entries(c).reduce((d,h)=>{const[m,C]=h;return[...d,`${m}=${C}`]},[]).join(","))},sn=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),an=[...Oe,...Ue],cn=an.map(t=>{const{name:e,path:a,meta:c,redirect:f,children:d}=t;return{name:e,path:a,meta:c,redirect:f,children:d}});function rn(){const t=re(),e=z(),a=S(()=>e.menuFromServer?e.appAsyncMenus:cn);return{menuTree:S(()=>{const f=JSON.parse(JSON.stringify(a.value));f.sort((h,m)=>(h.meta.order||0)-(m.meta.order||0));function d(h,m){return h?h.map(r=>{var w,l;if(!t.accessRouter(r))return null;if(((w=r.meta)==null?void 0:w.hideChildrenInMenu)||!r.children)return r.children=[],r;r.children=r.children.filter(g=>{var b;return((b=g.meta)==null?void 0:b.hideInMenu)!==!0});const $=d(r.children,m+1);return $.length||m>1?(r.children=$,r):((l=r.meta)==null?void 0:l.hideInMenu)===!1?r:null}).filter(Boolean):null}return d(f,0)})}}function ln(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ut(t)}var un=R({emit:["collapse"],setup(){const{t}=ce(),e=z(),a=Q(),c=ke(),{menuTree:f}=rn(),d=S({get(){return e.device==="desktop"?e.menuCollapse:!1},set(l){e.updateSettings({menuCollapse:l})}}),h=E([]),m=E([]),C=l=>{if(sn.test(l.path)){on(l.path),m.value=[l.name];return}const{hideInMenu:g,activeMenu:b}=l.meta;if(c.name===l.name&&!g&&!b){m.value=[l.name];return}a.push({name:l.name})},r=l=>{const g=[];let b=!1;const o=(_,k,y)=>{var L;if(_.name===y){b=!0,g.push(...k,_.name);return}((L=_.children)==null?void 0:L.length)&&_.children.forEach(j=>{o(j,[...k],y)})};return f.value.forEach(_=>{b||o(_,[_.name],l)}),g};le(l=>{const{requiresAuth:g,activeMenu:b,hideInMenu:o}=l.meta;if(g&&(!o||b)){const _=r(b||l.name),k=new Set([..._,...h.value]);h.value=[...k],m.value=[b||_[_.length-1]]}},!0);const $=l=>{e.device==="desktop"&&e.updateSettings({menuCollapse:l})},w=()=>{function l(g,b=[]){return g&&g.forEach(o=>{var y;const _=((y=o==null?void 0:o.meta)==null?void 0:y.icon)?()=>{var L;return he(ye(`<${(L=o==null?void 0:o.meta)==null?void 0:L.icon}/>`))}:null,k=(o==null?void 0:o.children)&&(o==null?void 0:o.children.length)!==0?s(_t,{key:o==null?void 0:o.name},{default:()=>[l(o==null?void 0:o.children)],icon:_,title:()=>{var L;return he(ye(t(((L=o==null?void 0:o.meta)==null?void 0:L.locale)||"")))}}):s(pt,{key:o==null?void 0:o.name,onClick:()=>C(o)},{default:()=>{var L;return[t(((L=o==null?void 0:o.meta)==null?void 0:L.locale)||"")]},icon:_});b.push(k)}),b}return l(f.value)};return()=>{let l;return s(dt,{class:"layout-menu",collapsed:d.value,"onUpdate:collapsed":g=>d.value=g,"open-keys":h.value,"onUpdate:open-keys":g=>h.value=g,"show-collapse-button":e.device!=="mobile","auto-open":!1,"selected-keys":m.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:$},ln(l=w())?l:{default:()=>[l]})}}});var xe=F(un,[["__scopeId","data-v-28cd1091"]]);const dn=t=>(ge("data-v-67b8654a"),t=t(),ve(),t),_n={class:"tab-bar-container"},pn={class:"tab-bar-box"},fn={class:"tab-bar-scroll"},gn={class:"tags-wrap"},vn=["onClick"],hn={class:"tag-link"},yn=["onClick"],mn=dn(()=>p("div",{class:"tag-bar-operation"},null,-1)),bn=R({setup(t){const e=z(),a=ie(),c=Q(),f=E(),d=S(()=>a.getTabList),h=S(()=>e.navbar?60:0);me(()=>e.navbar,()=>{f.value.updatePosition()}),le(r=>{!r.meta.noAffix&&!d.value.some($=>$.fullPath===r.fullPath)&&a.updateTabList(r)},!0);const m=(r,$)=>{if(a.deleteTag($,r),$===d.value.length){const w=d.value[d.value.length-1];c.push({name:w.name})}},C=r=>{c.push(K({},r))};return(r,$)=>{const w=B("icon-close"),l=gt;return i(),D("div",_n,[s(l,{ref_key:"affixRef",ref:f,"offset-top":v(h)},{default:n(()=>[p("div",pn,[p("div",fn,[p("div",gn,[(i(!0),D(G,null,J(v(d),(g,b)=>(i(),D("span",{key:g.fullPath,class:Y(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":g.fullPath===r.$route.fullPath}]),onClick:o=>C(g)},[p("span",hn,M(r.$t(g.title)),1),p("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:ft(o=>m(g,b),["stop"])},[s(w)],8,yn)],10,vn))),128))])]),mn])]),_:1},8,["offset-top"])])}}});var kn=F(bn,[["__scopeId","data-v-67b8654a"]]);function xn(t,e,a,c=!1){t.addEventListener&&typeof t.addEventListener=="function"&&t.addEventListener(e,a,c)}function $n(t,e,a,c=!1){t.removeEventListener&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,a,c)}const Cn=992;function wn(){return document.body.getBoundingClientRect().width-1<Cn}function Ln(t){const e=z();function a(){if(!document.hidden){const f=wn();e.toggleDevice(f?"mobile":"desktop"),e.toggleMenu(f)}}const c=Dt(a,100);vt(()=>{t&&c()}),ht(()=>{xn(window,"resize",c)}),yt(()=>{$n(window,"resize",c)})}const Sn=R({setup(t){const e=ie(),a=S(()=>e.getCacheList);return(c,f)=>{const d=B("router-view");return i(),x(d,null,{default:n(({Component:h,route:m})=>[s(bt,{name:"fade",mode:"out-in",appear:""},{default:n(()=>[m.meta.ignoreCache?(i(),x(be(h),{key:m.fullPath})):(i(),x(mt,{key:1,include:v(a)},[(i(),x(be(h),{key:m.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const Mn={key:0,class:"layout-navbar"},Bn={class:"menu-wrapper"},Tn=R({setup(t){const e=z(),a=X(),c=Q(),f=ke(),d=re();Ln(!0);const h="60px",m=S(()=>e.navbar),C=S(()=>e.menu),r=S(()=>e.hideMenu),$=S(()=>e.footer),w=S(()=>e.menuCollapse?48:e.menuWidth),l=S(()=>e.menuCollapse),g=S(()=>{const k=C.value&&!r.value?{paddingLeft:`${w.value}px`}:{},y=m.value?{paddingTop:h}:{};return K(K({},k),y)}),b=k=>{e.updateSettings({menuCollapse:k})};me(()=>a.role,k=>{k&&!d.accessRouter(f)&&c.push({name:"notFound"})});const o=E(!1),_=()=>{o.value=!1};return kt("toggleDrawerMenu",()=>{o.value=!o.value}),(k,y)=>{const L=Ct,j=wt,P=Lt,u=St;return i(),x(u,{class:Y(["layout",{"layout-mobile":v(e).hideMenu,"layout-collapsed":v(l)}])},{default:n(()=>[v(m)?(i(),D("div",Mn,[s(nn)])):I("",!0),s(u,null,{default:n(()=>[s(u,null,{default:n(()=>[v(C)?xt((i(),x(L,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:v(l),collapsible:!0,width:v(w),style:W({paddingTop:v(m)?"60px":""}),"hide-trigger":!0,onCollapse:b},{default:n(()=>[p("div",Bn,[s(xe)])]),_:1},8,["collapsed","width","style"])),[[$t,!v(r)]]):I("",!0),v(r)?(i(),x(j,{key:1,class:"layout-menu--drawer",visible:o.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:_},{default:n(()=>[s(xe)]),_:1},8,["visible"])):I("",!0),s(u,{class:"layout-content",style:W(v(g))},{default:n(()=>[v(e).tabBar?(i(),x(kn,{key:0})):I("",!0),s(P,null,{default:n(()=>[s(Sn)]),_:1}),v($)?(i(),x(Ke,{key:1})):I("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var Xn=F(Tn,[["__scopeId","data-v-7aca08f5"]]);export{Xn as default};
