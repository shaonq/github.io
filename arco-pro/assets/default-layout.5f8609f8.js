import{a as Y,_ as F,u as ae,c as P,d as Ce,L as Le,e as Se,f as ne,l as te,g as ce}from"./index.83b7998e.js";import{L as Me,F as Be}from"./index.9e340107.js";import{aS as ie,d as E,aJ as B,A as i,aC as _,aF as e,aG as r,E as p,aL as M,aM as S,C as G,B as D,aH as W,D as K,aD as T,bT as Te,aI as H,bq as De,bd as ue,bt as Ie,b4 as le,bm as Re,bP as Ee,bQ as Fe,b3 as Pe,bR as Ae,e as R,r as je,t as Ve,c as w,u as h,b7 as Ne,by as Oe,aT as se,bz as Ue,bi as Ke,i as qe,bU as We,bV as He,bW as Je,bX as Ye,bY as Ge,bZ as Qe,b_ as Xe,h as Z,bx as ee,b$ as Ze,c0 as eo,w as de,c1 as oo,bb as ro,bc as ao,c2 as no,o as to,c3 as co,c4 as io,bo as oe,bD as uo,c5 as lo,p as so,bH as mo,c6 as po,c7 as go,aV as ho,c8 as bo,c9 as vo}from"./arco.13522f51.js";import{f as J,i as fo,h as xo,j as me,k as _o}from"./vue.e6702de9.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{a as ko,s as yo}from"./message.55ba5648.js";import{u as wo}from"./loading.26e9662f.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./chart.6b282c89.js";function zo(){const n=J(),a=Y();return{logout:async u=>{await a.logout();const b=n.currentRoute.value;ie.success("\u767B\u51FA\u6210\u529F"),n.push({name:u&&typeof u=="string"?u:"login",query:{...n.currentRoute.value.query,redirect:b.name}})}}}const $o=M("\u672A\u5F00\u59CB"),Co=M("\u5DF2\u5F00\u901A"),Lo=M("\u8FDB\u884C\u4E2D"),So=M("\u5373\u5C06\u5230\u671F"),Mo=["onClick"],Bo=["src"],To={class:"footer-wrap"},Do={class:"footer-wrap"},Io=E({__name:"list",props:{renderList:{type:Array,required:!0},unreadCount:{type:Number,default:0}},emits:["itemClick"],setup(n,{emit:a}){const d=n,u=()=>{a("itemClick",[...d.renderList])},b=v=>{v.status||a("itemClick",[v])},m=3;return(v,x)=>{const L=De,t=B("icon-desktop"),z=ue,$=Ie,c=le,g=Re,k=Ee,o=Fe,l=Pe,y=Ae;return i(),_(y,{bordered:!1},{footer:e(()=>[r(c,{fill:"",size:0,class:G({"add-border-top":n.renderList.length<m})},{default:e(()=>[p("div",To,[r(l,{onClick:u},{default:e(()=>[M(S(v.$t("messageBox.allRead")),1)]),_:1})]),p("div",Do,[r(l,null,{default:e(()=>[M(S(v.$t("messageBox.viewMore")),1)]),_:1})])]),_:1},8,["class"])]),default:e(()=>[(i(!0),D(H,null,W(n.renderList,f=>(i(),_(o,{key:f.id,"action-layout":"vertical",style:K({opacity:f.status?.5:1})},{extra:e(()=>[f.messageType===0?(i(),_(L,{key:0,color:"gray"},{default:e(()=>[$o]),_:1})):f.messageType===1?(i(),_(L,{key:1,color:"green"},{default:e(()=>[Co]),_:1})):f.messageType===2?(i(),_(L,{key:2,color:"blue"},{default:e(()=>[Lo]),_:1})):f.messageType===3?(i(),_(L,{key:3,color:"red"},{default:e(()=>[So]),_:1})):T("",!0)]),default:e(()=>[p("div",{class:"item-wrap",onClick:C=>b(f)},[r(k,null,Te({title:e(()=>[r(c,{size:4},{default:e(()=>[p("span",null,S(f.title),1),r($,{type:"secondary"},{default:e(()=>[M(S(f.subTitle),1)]),_:2},1024)]),_:2},1024)]),description:e(()=>[p("div",null,[r(g,{ellipsis:{rows:1}},{default:e(()=>[M(S(f.content),1)]),_:2},1024),f.type==="message"?(i(),_($,{key:0,class:"time-text"},{default:e(()=>[M(S(f.time),1)]),_:2},1024)):T("",!0)])]),_:2},[f.avatar?{name:"avatar",fn:e(()=>[r(z,{shape:"circle"},{default:e(()=>[f.avatar?(i(),D("img",{key:0,src:f.avatar},null,8,Bo)):(i(),_(t,{key:1}))]),_:2},1024)])}:void 0]),1024)],8,Mo)]),_:2},1032,["style"]))),128)),n.renderList.length&&n.renderList.length<3?(i(),D("div",{key:0,style:K({height:(m-n.renderList.length)*86+"px"})},null,4)):T("",!0)]),_:1})}}});var Ro=F(Io,[["__scopeId","data-v-154bec5a"]]);const Eo=E({__name:"index",setup(n){const{loading:a,setLoading:d}=wo(!0),u=R("message"),{t:b}=ae(),m=je({renderList:[],messageList:[]});Ve(m);const v=w(()=>[{key:"message",title:b("messageBox.tab.title.message")},{key:"notice",title:b("messageBox.tab.title.notice")},{key:"todo",title:b("messageBox.tab.title.todo")}]);async function x(){d(!0);try{const{data:o}=await ko();m.messageList=o}catch{}finally{d(!1)}}async function L(o){const l=o.map(y=>y.id);await yo({ids:l}),x()}const t=w(()=>m.messageList.filter(o=>u.value===o.type)),z=w(()=>t.value.filter(o=>!o.status).length),$=o=>m.messageList.filter(y=>y.type===o&&!y.status),c=o=>{const l=$(o);return l.length?`(${l.length})`:""},g=o=>{t.value.length&&L([...o])},k=()=>{m.messageList=[]};return x(),(o,l)=>{const y=Ne,f=Oe,C=se,I=Ue,A=Ke;return i(),_(A,{style:{display:"block"},loading:h(a)},{default:e(()=>[r(I,{activeKey:u.value,"onUpdate:activeKey":l[0]||(l[0]=s=>u.value=s),type:"rounded","destroy-on-hide":"","lazy-load":""},{extra:e(()=>[r(C,{type:"text",onClick:k},{default:e(()=>[M(S(o.$t("messageBox.tab.button")),1)]),_:1})]),default:e(()=>[(i(!0),D(H,null,W(h(v),s=>(i(),_(f,{key:s.key},{title:e(()=>[p("span",null,S(s.title)+S(c(s.key)),1)]),default:e(()=>[h(t).length?T("",!0):(i(),_(y,{key:0,status:"404"},{subtitle:e(()=>[M(S(o.$t("messageBox.noContent")),1)]),_:1})),r(Ro,{"render-list":h(t),"unread-count":h(z),onItemClick:g},null,8,["render-list","unread-count"])]),_:2},1024))),128))]),_:1},8,["activeKey"])]),_:1},8,["loading"])}}});var Fo=F(Eo,[["__scopeId","data-v-0e2e321f"]]);const Po={class:"navbar"},Ao={class:"layout-logo__warp"},jo={class:"right-side"},Vo={class:"message-box-trigger"},No=["src"],Oo=M(),Uo=M(),Ko=M(),qo=M(),Wo=E({__name:"index",setup(n){const a=P(),d=Y(),{logout:u}=zo(),{changeLocale:b}=Ce(),m=[...Le],v=w(()=>a.menuCollapse?48:a.menuWidth),x=w(()=>a.menuCollapse),L=w(()=>d.avatar),t=w(()=>a.theme),z=fo({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(s){a.toggleTheme(s)}}),$=xo(z),c=()=>{$()},g=()=>{a.updateSettings({globalSettings:!0})},k=()=>{window.open("https://arco.design/vue/docs/pro/permission")},o=R(),l=R(),y=()=>{const s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});o.value.dispatchEvent(s)},f=()=>{u()},C=()=>{const s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});l.value.dispatchEvent(s)},I=async()=>{const s=await d.switchRoles();ie.success(s)},A=qe("toggleDrawerMenu");return(s,q)=>{const pe=B("icon-home"),ge=B("icon-menu-fold"),j=le,he=B("icon-language"),V=se,N=We,O=He,Q=Je,be=B("icon-moon-fill"),ve=B("icon-sun-fill"),fe=B("icon-notification"),xe=Ye,_e=Ge,X=B("icon-settings"),ke=B("icon-book"),ye=ue,we=B("icon-tag"),ze=B("icon-user"),$e=B("icon-export");return i(),D("div",Po,[p("div",{class:"left-side layout-logo",style:K({width:h(v)+"px"})},[r(j,null,{default:e(()=>[p("div",Ao,[h(x)?(i(),_(pe,{key:1,class:"layout-logo__icon-logo"})):(i(),_(h(Me),{key:0}))]),h(a).device==="mobile"?(i(),_(ge,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:h(A)},null,8,["onClick"])):T("",!0)]),_:1})],4),p("ul",jo,[p("li",null,[r(N,{content:s.$t("settings.language")},{default:e(()=>[r(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:C},{icon:e(()=>[r(he)]),_:1})]),_:1},8,["content"]),r(Q,{trigger:"click",onSelect:h(b)},{content:e(()=>[(i(),D(H,null,W(m,U=>r(O,{key:U.value,value:U.value},{default:e(()=>[M(S(U.label),1)]),_:2},1032,["value"])),64))]),default:e(()=>[p("div",{ref_key:"triggerBtn",ref:l,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),p("li",null,[r(N,{content:h(t)==="light"?s.$t("settings.navbar.theme.toDark"):s.$t("settings.navbar.theme.toLight")},{default:e(()=>[r(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:c},{icon:e(()=>[h(t)==="dark"?(i(),_(be,{key:0})):(i(),_(ve,{key:1}))]),_:1})]),_:1},8,["content"])]),p("li",null,[r(N,{content:s.$t("settings.navbar.alerts")},{default:e(()=>[p("div",Vo,[r(xe,{count:9,dot:""},{default:e(()=>[r(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:y},{default:e(()=>[r(fe)]),_:1})]),_:1})])]),_:1},8,["content"]),r(_e,{trigger:"click","arrow-style":{display:"none"},"content-style":{padding:0,width:"360px"},"content-class":"message-popover"},{content:e(()=>[r(Fo)]),default:e(()=>[p("div",{ref_key:"refBtn",ref:o,class:"ref-btn"},null,512)]),_:1})]),p("li",null,[r(N,{content:s.$t("settings.title")},{default:e(()=>[r(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:g},{icon:e(()=>[r(X)]),_:1})]),_:1},8,["content"])]),p("li",null,[r(N,{content:s.$t("settings.helpDocument")},{default:e(()=>[r(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:k},{icon:e(()=>[r(ke)]),_:1})]),_:1},8,["content"])]),p("li",null,[r(Q,{trigger:"click"},{content:e(()=>[r(O,null,{default:e(()=>[r(j,{onClick:I},{default:e(()=>[r(we),Oo,p("span",null,S(s.$t("messageBox.switchRoles")),1)]),_:1})]),_:1}),r(O,null,{default:e(()=>[r(j,{onClick:q[0]||(q[0]=U=>s.$router.push({name:"Info"}))},{default:e(()=>[r(ze),Uo,p("span",null,S(s.$t("messageBox.userCenter")),1)]),_:1})]),_:1}),r(O,null,{default:e(()=>[r(j,{onClick:q[1]||(q[1]=U=>s.$router.push({name:"Setting"}))},{default:e(()=>[r(X),Ko,p("span",null,S(s.$t("messageBox.userSettings")),1)]),_:1})]),_:1}),r(O,null,{default:e(()=>[r(j,{onClick:f},{default:e(()=>[r($e),qo,p("span",null,S(s.$t("messageBox.logout")),1)]),_:1})]),_:1})]),default:e(()=>[r(ye,{size:32,style:{marginRight:"8px",cursor:"pointer"}},{default:e(()=>[p("img",{alt:"avatar",src:h(L)},null,8,No)]),_:1})]),_:1})])])])}}});var Ho=F(Wo,[["__scopeId","data-v-5ac33a74"]]);const Jo=(n,a)=>{const{target:d="_blank",...u}=a||{};window.open(n,d,Object.entries(u).reduce((b,m)=>{const[v,x]=m;return[...b,`${v}=${x}`]},[]).join(","))},Yo=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),Go=[...Se],Qo=Go.map(n=>{const{name:a,path:d,meta:u,redirect:b,children:m}=n;return{name:a,path:d,meta:u,redirect:b,children:m}});function Xo(){const n=ne(),a=P(),d=w(()=>a.menuFromServer?a.appAsyncMenus:Qo);return{menuTree:w(()=>{const b=JSON.parse(JSON.stringify(d.value));b.sort((v,x)=>(v.meta.order||0)-(x.meta.order||0));function m(v,x){return v?v.map(t=>{var $,c;if(!n.accessRouter(t))return null;if((($=t.meta)==null?void 0:$.hideChildrenInMenu)||!t.children)return t.children=[],t;t.children=t.children.filter(g=>{var k;return((k=g.meta)==null?void 0:k.hideInMenu)!==!0});const z=m(t.children,x+1);return z.length||x>1?(t.children=z,t):((c=t.meta)==null?void 0:c.hideInMenu)===!1?t:null}).filter(Boolean):null}return m(b,0)})}}function Zo(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Qe(n)}var er=E({emit:["collapse"],setup(){const{t:n}=ae(),a=P(),d=J(),u=me(),{menuTree:b}=Xo(),m=w({get(){return a.device==="desktop"?a.menuCollapse:!1},set(c){a.updateSettings({menuCollapse:c})}}),v=R([]),x=R([]),L=c=>{if(Yo.test(c.path)){Jo(c.path),x.value=[c.name];return}const{hideInMenu:g,activeMenu:k}=c.meta;if(u.name===c.name&&!g&&!k){x.value=[c.name];return}d.push({name:c.name})},t=c=>{const g=[];let k=!1;const o=(l,y,f)=>{var C;if(l.name===f){k=!0,g.push(...y,l.name);return}(C=l.children)!=null&&C.length&&l.children.forEach(I=>{o(I,[...y],f)})};return b.value.forEach(l=>{k||o(l,[l.name],c)}),g};te(c=>{const{requiresAuth:g,activeMenu:k,hideInMenu:o}=c.meta;if(g&&(!o||k)){const l=t(k||c.name),y=new Set([...l,...v.value]);v.value=[...y],x.value=[k||l[l.length-1]]}},!0);const z=c=>{a.device==="desktop"&&a.updateSettings({menuCollapse:c})},$=()=>{function c(g,k=[]){return g&&g.forEach(o=>{var f;const l=(f=o==null?void 0:o.meta)!=null&&f.icon?()=>{var C;return Z(ee(`<${(C=o==null?void 0:o.meta)==null?void 0:C.icon}/>`))}:null,y=(o==null?void 0:o.children)&&(o==null?void 0:o.children.length)!==0?r(Ze,{key:o==null?void 0:o.name},{default:()=>[c(o==null?void 0:o.children)],icon:l,title:()=>{var C;return Z(ee(n(((C=o==null?void 0:o.meta)==null?void 0:C.locale)||"")))}}):r(eo,{key:o==null?void 0:o.name,onClick:()=>L(o)},{default:()=>{var C;return[n(((C=o==null?void 0:o.meta)==null?void 0:C.locale)||"")]},icon:l});k.push(y)}),k}return c(b.value)};return()=>{let c;return r(Xe,{class:"layout-menu",collapsed:m.value,"onUpdate:collapsed":g=>m.value=g,"open-keys":v.value,"onUpdate:open-keys":g=>v.value=g,"show-collapse-button":a.device!=="mobile","auto-open":!1,"selected-keys":x.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:z},Zo(c=$())?c:{default:()=>[c]})}}});var re=F(er,[["__scopeId","data-v-28cd1091"]]);const or=n=>(ro("data-v-04fe86a0"),n=n(),ao(),n),rr={class:"tab-bar-container"},ar={class:"tab-bar-box"},nr={class:"tab-bar-scroll"},tr={class:"tags-wrap"},cr=["onClick"],ir={class:"tag-link"},ur=["onClick"],lr=or(()=>p("div",{class:"tag-bar-operation"},null,-1)),sr=E({__name:"index",setup(n){const a=P(),d=ce(),u=J(),b=R(),m=w(()=>d.getTabList),v=w(()=>a.navbar?60:0);de(()=>a.navbar,()=>{b.value.updatePosition()}),te(t=>{!t.meta.noAffix&&!m.value.some(z=>z.fullPath===t.fullPath)&&d.updateTabList(t)},!0);const x=(t,z)=>{if(d.deleteTag(z,t),z===m.value.length){const $=m.value[m.value.length-1];u.push({name:$.name})}},L=t=>{u.push({...t})};return(t,z)=>{const $=B("icon-close"),c=no;return i(),D("div",rr,[r(c,{ref_key:"affixRef",ref:b,"offset-top":h(v)},{default:e(()=>[p("div",ar,[p("div",nr,[p("div",tr,[(i(!0),D(H,null,W(h(m),(g,k)=>(i(),D("span",{key:g.fullPath,class:G(["arco-tag arco-tag-checked",{"link-activated":g.fullPath===t.$route.fullPath}]),onClick:o=>L(g)},[p("span",ir,S(t.$t(g.title)),1),p("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:oo(o=>x(g,k),["stop"])},[r($)],8,ur)],10,cr))),128))])]),lr])]),_:1},8,["offset-top"])])}}});var dr=F(sr,[["__scopeId","data-v-04fe86a0"]]);function mr(n,a,d,u=!1){n.addEventListener&&typeof n.addEventListener=="function"&&n.addEventListener(a,d,u)}function pr(n,a,d,u=!1){n.removeEventListener&&typeof n.removeEventListener=="function"&&n.removeEventListener(a,d,u)}const gr=992;function hr(){return document.body.getBoundingClientRect().width-1<gr}function br(n){const a=P();function d(){if(!document.hidden){const b=hr();a.toggleDevice(b?"mobile":"desktop"),a.toggleMenu(b)}}const u=_o(d,100);to(()=>{n&&u()}),co(()=>{mr(window,"resize",u)}),io(()=>{pr(window,"resize",u)})}const vr=E({__name:"page-layout",setup(n){const a=ce(),d=w(()=>a.getCacheList);return(u,b)=>{const m=B("router-view");return i(),_(m,null,{default:e(({Component:v,route:x})=>[r(lo,{name:"fade",mode:"out-in",appear:""},{default:e(()=>[x.meta.ignoreCache?(i(),_(oe(v),{key:x.fullPath})):(i(),_(uo,{key:1,include:h(d)},[(i(),_(oe(v),{key:x.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const fr={key:0,class:"layout-navbar"},xr={class:"menu-wrapper"},_r=E({__name:"default-layout",setup(n){const a=P(),d=Y(),u=J(),b=me(),m=ne();br(!0);const v="60px",x=w(()=>a.navbar),L=w(()=>a.menu),t=w(()=>a.hideMenu),z=w(()=>a.footer),$=w(()=>a.menuCollapse?48:a.menuWidth),c=w(()=>a.menuCollapse),g=w(()=>{const y=L.value&&!t.value?{paddingLeft:`${$.value}px`}:{},f=x.value?{paddingTop:v}:{};return{...y,...f}}),k=y=>{a.updateSettings({menuCollapse:y})};de(()=>d.role,y=>{y&&!m.accessRouter(b)&&u.push({name:"notFound"})});const o=R(!1),l=()=>{o.value=!1};return so("toggleDrawerMenu",()=>{o.value=!o.value}),(y,f)=>{const C=go,I=ho,A=bo,s=vo;return i(),_(s,{class:G(["layout",{"layout-mobile":h(a).hideMenu,"layout-collapsed":h(c)}])},{default:e(()=>[h(x)?(i(),D("div",fr,[r(Ho)])):T("",!0),r(s,null,{default:e(()=>[r(s,null,{default:e(()=>[h(L)?mo((i(),_(C,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:h(c),collapsible:!0,width:h($),style:K({paddingTop:h(x)?"60px":""}),"hide-trigger":!0,onCollapse:k},{default:e(()=>[p("div",xr,[r(re)])]),_:1},8,["collapsed","width","style"])),[[po,!h(t)]]):T("",!0),h(t)?(i(),_(I,{key:1,class:"layout-menu--drawer",visible:o.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:l},{default:e(()=>[r(re)]),_:1},8,["visible"])):T("",!0),r(s,{class:"layout-content",style:K(h(g))},{default:e(()=>[h(a).tabBar?(i(),_(dr,{key:0})):T("",!0),r(A,null,{default:e(()=>[r(vr)]),_:1}),h(z)?(i(),_(Be,{key:1})):T("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var Or=F(_r,[["__scopeId","data-v-e97e6754"]]);export{Or as default};
