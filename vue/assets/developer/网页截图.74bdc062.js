import{s as e}from"../shaonq/shaonq.754e411d.js";import{_ as a}from"../index.e3586e2d.js";import{q as t,v as s,D as i,l}from"../@vue/@vue.3037e913.js";import"../vue-router/vue-router.4388a103.js";import"../pinia/pinia.03fbb748.js";import"../vue-demi/vue-demi.784001c0.js";import"../quill/quill.3362dfa5.js";import"../nprogress/nprogress.18cafdd9.js";import"../echarts/echarts.22f0db08.js";import"../tslib/tslib.b9ce9c9f.js";import"../zrender/zrender.31b37330.js";const n={setup:()=>({captureCanvas({el:a,success:t}){let s=e.dom,{loadJs:i}=e;!async function(){"undefined"==typeof html2canvas&&await i("https://unpkg.com/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js");let e=s.position(a);window.scrollTo(e.pageXOffset,e.top);let l=document.createElement("canvas"),n=window.devicePixelRatio||1,o=e.width*n,d=e.height*n;l.width=2*o,l.height=2*d,l.style.width=o+"px",l.style.height=d+"px",l.getContext("2d").scale(2,2),html2canvas(a,{canvas:l,background:"#FFFFFF",scrollY:0,scrollX:0,width:o,height:d,useCORS:!0}).then(t)}()},createPDF({canvas:a,pdfName:t}){let{loadJs:s}=e;!async function(){"undefined"==typeof jsPDF&&await s("https://unpkg.com/jspdf@1.3.1/dist/jspdf.min.js");let e=594.3,i=840.51,l=a.height*(e/a.width),n=e,o=i,d=a.toDataURL("image/jpeg",.83),c=Math.ceil(l/o),r=new jsPDF("","pt","a4");for(let a=1;a<=c;a++){let e=-(a-1)*o;if(o-(a*o-l)<5)return;r.addImage(d,"JPEG",0,e,n,l),a!==c&&r.addPage()}r.save(t+".pdf"),r=a=null}()},appendCanvas(){let a=e.dom,t=a.el("#qq");a.position(t),this.captureCanvas({el:t,success:e=>{let t=e.toDataURL("image/jpeg",.83),s=new Image;s.src=t,s.onload=()=>a.append(s,a.el("#qq")),a.on(s,"click",this.imageView)}})},downloadPDF(){let a=e.dom.el("#qq");this.captureCanvas({el:a,success:a=>{this.createPDF({canvas:a,pdfName:e.date.today()})}})},imageView(a){e.showImageView(a.target)}})},o={class:"u-quill-body"},d={id:"qq"},c=s("h1",null,"网页截图",-1),r=s("ol",null,[s("li",null,[s("code",null,"html2canvas.js"),i(" 网页转换为图片")]),s("li",null,[s("code",null,"jspdf.js"),i(" 图片转换为pdf文件")])],-1),p=s("hr",null,null,-1),u=s("hr",null,null,-1),m={class:"u-btn__group u-mb u-ml"};var h=a(n,[["render",function(e,a,i,n,h,f){return l(),t("div",null,[s("div",o,[s("div",d,[c,r,p,s("img",{onClick:a[0]||(a[0]=(...e)=>n.imageView&&n.imageView(...e)),src:"https://imgs.aixifan.com/jy9Gvt7hIk-iYn2Qf-iyUvai-zMf2ya-qeeeea.jpg"}),u,s("p",{onClick:a[1]||(a[1]=a=>e.$util.toast("123"))},"点击测试↓")])]),s("div",m,[s("a",{class:"u-btn",onClick:a[2]||(a[2]=e=>n.appendCanvas())},"生成截图"),s("a",{class:"u-btn",onClick:a[3]||(a[3]=e=>n.downloadPDF())},"下载PDF")])])}]]);export{h as default};
