import{s as e}from"../shaonq/shaonq.754e411d.js";import{d as t,a as s,O as a,q as i,v as o,G as l,P as n,F as d,y as r,B as u,H as p,l as c}from"../@vue/@vue.3037e913.js";import{_ as m}from"../index.5bb40e89.js";import"../vue-router/vue-router.80e3d4ff.js";import"../pinia/pinia.03fbb748.js";import"../vue-demi/vue-demi.784001c0.js";import"../quill/quill.3362dfa5.js";import"../nprogress/nprogress.18cafdd9.js";import"../echarts/echarts.22f0db08.js";import"../tslib/tslib.b9ce9c9f.js";import"../zrender/zrender.31b37330.js";const f=t({setup(){const t=s("https://shaonq.github.io/md/file/如何快速实现网页预览PDF文件.pdf"),i=s(!0);async function o(t,s){return window.pdfjsLib||(await e.loadJs("https://unpkg.com/pdfjs-dist@2.5.207/build/pdf.js"),pdfjsLib.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@2.5.207/build/pdf.worker.js"),new Promise((function(e,a){pdfjsLib.getDocument(s).promise.then((s=>{let a=s.numPages,i=e=>{var o;(o=e,s.getPage(o).then((function(e){let s=e.getViewport({scale:2}),a=document.createElement("canvas");a.width=s.width||794,a.height=s.height||1123,a.style.width="100%",a.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.16)",a.style.marginBottom="5px",a.style.borderRadius="2px",a.style.display="block";let i=a.getContext("2d"),o=e.render({canvasContext:i,viewport:s});return t.appendChild(a),a=null,o.promise}))).then((()=>{e++,a>=e&&i(e)}))};i(1),e(a)})).catch(a)}))}async function l(){i.value=!0;try{let s=document.getElementById("view"),a=await o(s,t.value);e.showNearby({content:`加载了一个 ${a} 页的pdf文件`,offset:["100px","auto"]}),i.value=!1}catch(s){}}return a((async()=>{await l()})),{value:t,loading:i,loadDemo:l}}}),v={class:"u-quill-body"},h=o("h1",null,"在线阅读pdf",-1),b={class:"u-flex"},g={class:"u-flex__item"},j={key:0,class:"u-skeleton is-loading"},w={id:"view"};var y=m(f,[["render",function(e,t,s,a,m,f){return c(),i("div",null,[o("div",v,[h,o("div",b,[o("div",g,[l(o("input",{class:"u-input",placeholder:"请输入一个在线地址","onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t)},null,512),[[n,e.value]])]),o("div",null,[o("button",{class:"u-btn u-ml",onClick:t[1]||(t[1]=t=>e.loadDemo())},"在线查看")])]),e.loading?(c(),i("div",j,[(c(),i(d,null,r(10,(e=>o("p",{class:"u-skeleton__item",key:e}))),64))])):u("",!0),l(o("div",w,null,512),[[p,!e.loading]])])])}]]);export{y as default};
