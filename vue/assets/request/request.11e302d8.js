import{a as t}from"../axios/axios.e13dbd1c.js";const e=0,r=t.create({baseURL:"/",timeout:1e3,withCredentials:!0});r.interceptors.request.use((t=>t)),r.defaults.timeout=1e4,r.interceptors.response.use((t=>{if(200===t.status){const{data:r}=t;if(r.code===e)return r}return t}),(async t=>{const{config:e}=t;if(!e||!e.retry)return Promise.reject(t);if(e.retryCount=e.retryCount||0,e.retryCount>=e.retry)return Promise.reject(t);e.retryCount+=1;const a=new Promise((t=>{setTimeout((()=>{t(null)}),e.retryDelay||1)}));return await a,await r(e)}));const a={get:(t,e)=>new Promise(((a,s)=>{r.get(t,{params:e}).then((t=>{a(t.data)})).catch((t=>{s(t.data)}))})),post:(t,e)=>new Promise(((a,s)=>{r.post(t,JSON.stringify(e)).then((t=>{a(t.data)})).catch((t=>{s(t.data)}))})),upload:(t,e)=>new Promise(((a,s)=>{r.post(t,e,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{a(t.data)})).catch((t=>{s(t.data)}))}))};export{a as h};
