import{M as e}from"../mockjs/mockjs.56624cf4.js";import{p as t}from"../path-to-regexp/path-to-regexp.dea237f3.js";const o=e;function s(e){o.XHR.prototype.__send=o.XHR.prototype.send,o.XHR.prototype.send=function(){if(this.custom.xhr&&(this.custom.xhr.withCredentials=this.withCredentials||!1,this.responseType&&(this.custom.xhr.responseType=this.responseType)),this.custom.requestHeaders){const e={};for(let t in this.custom.requestHeaders)e[t.toString().toLowerCase()]=this.custom.requestHeaders[t];this.custom.options=Object.assign({},this.custom.options,{headers:e})}this.__send.apply(this,arguments)},o.XHR.prototype.proxy_open=o.XHR.prototype.open,o.XHR.prototype.open=function(){let e=this.responseType;this.proxy_open(...arguments),this.custom.xhr&&e&&(this.custom.xhr.responseType=e)};for(const{url:s,method:r,response:i,timeout:c}of e)n(c),o.mock(t(s,void 0,{end:!1}),r||"get",p(i))}function r(e){const t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function p(e){return function(t){let s=null;if("function"==typeof e){const{body:o,type:p,url:n,headers:i}=t;let c=o;try{c=JSON.parse(o)}catch{}s=e({method:p,body:c,query:r(n),headers:i})}else s=e;return o.mock(s)}}function n(e=0){e&&o.setup({timeout:e})}export{s as c};
