import{s as e}from"../shaonq/shaonq.e47bfeb9.js";import{_ as a}from"../index.56e2a9af.js";import{k as t,v as s,x as n,N as i}from"../@vue/@vue.a9907412.js";import"../vue-router/vue-router.30f59dce.js";import"../pinia/pinia.2d6c69fe.js";import"../vue-demi/vue-demi.784001c0.js";import"../vite-plugin-mock/vite-plugin-mock.5f58db78.js";import"../mockjs/mockjs.69e5819b.js";import"../path-to-regexp/path-to-regexp.dea237f3.js";const o={setup:()=>({captureCanvas({el:a,success:t}){const s=e.dom,{loadJs:n}=e;!async function(){"undefined"==typeof html2canvas&&await n("https://unpkg.com/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js");const e=s.position(a);window.scrollTo(e.pageXOffset,e.top);const i=document.createElement("canvas"),o=window.devicePixelRatio||1,l=e.width*o,c=e.height*o;i.width=2*l,i.height=2*c,i.style.width=l+"px",i.style.height=c+"px";i.getContext("2d").scale(2,2),html2canvas(a,{canvas:i,background:"#FFFFFF",scrollY:0,scrollX:0,width:l,height:c,useCORS:!0}).then(t)}()},createPDF({canvas:a,pdfName:t}){const{loadJs:s}=e;!async function(){"undefined"==typeof jsPDF&&await s("https://unpkg.com/jspdf@1.3.1/dist/jspdf.min.js");const e=594.3,n=840.51,i=a.height*(e/a.width),o=e,l=n,c=a.toDataURL("image/jpeg",.83),d=Math.ceil(i/l);let p=new jsPDF("","pt","a4");for(let a=1;a<=d;a++){const e=-(a-1)*l;if(l-(a*l-i)<5)return;p.addImage(c,"JPEG",0,e,o,i),a!==d&&p.addPage()}p.save(t+".pdf"),p=a=null}()},appendCanvas(){const a=e.dom,t=a.el("#qq");a.position(t),this.captureCanvas({el:t,success:e=>{const t=e.toDataURL("image/jpeg",.83),s=new Image;s.src=t,s.onload=()=>a.append(s,a.el("#qq")),a.on(s,"click",this.imageView)}})},downloadPDF(){const a=e.dom.el("#qq");this.captureCanvas({el:a,success:a=>{this.createPDF({canvas:a,pdfName:e.date.today()})}})},imageView(a){e.showImageView(a.target)}})},l={class:"u-quill-body"},c={id:"qq"},d=n("h1",null,"网页截图",-1),p=n("ol",null,[n("li",null,[n("code",null,"html2canvas.js"),i(" 网页转换为图片")]),n("li",null,[n("code",null,"jspdf.js"),i(" 图片转换为pdf文件")])],-1),u=n("hr",null,null,-1),m=n("hr",null,null,-1),r={class:"u-btn__group u-mb u-ml"};var h=a(o,[["render",function(e,a,i,o,h,v){return t(),s("div",null,[n("div",l,[n("div",c,[d,p,u,n("img",{src:"https://imgs.aixifan.com/jy9Gvt7hIk-iYn2Qf-iyUvai-zMf2ya-qeeeea.jpg",onClick:a[0]||(a[0]=(...e)=>o.imageView&&o.imageView(...e))}),m,n("p",{onClick:a[1]||(a[1]=a=>e.$util.toast("123"))},"点击测试↓")])]),n("div",r,[n("a",{class:"u-btn",onClick:a[2]||(a[2]=e=>o.appendCanvas())},"生成截图"),n("a",{class:"u-btn",onClick:a[3]||(a[3]=e=>o.downloadPDF())},"下载PDF")])])}]]);export{h as default};
