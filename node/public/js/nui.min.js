!function(){"use strict";var t={v:"0.1.2"};t.log=function(t,e,n){window.console&&"localhost"===location.hostname&&t&&"error"===e&&(n="red"),"success"===e&&(n="green"),console.log("%c"+(e||"info")+" ","color:"+(n||"blue")+";",t)},t.loadJs=function(t,e){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.onload=i.onreadystatechange=i.onerror=function(){i&&i.readyState&&/^(?!(?:loaded|complete)$)/.test(i.readyState)||(i.onload=i.onreadystatechange=i.onerror=null,i.src="",i.parentNode.removeChild(i),i=null,e&&e())},i.src=t;try{n.appendChild(i)}catch(o){}},t.loadCss=function(t,e){var n=document.getElementsByTagName("head")[0],i=document.createElement("link");i.onload=i.onreadystatechange=i.onerror=function(){i&&i.readyState&&/^(?!(?:loaded|complete)$)/.test(i.readyState)||(i.onload=i.onreadystatechange=i.onerror=null,i.parentNode.removeChild(i),i=null,e&&e())},i.rel="stylesheet",i.href=t;try{n.appendChild(i)}catch(o){}},t.init=function(e){t.is=function(){var t={},e=navigator.userAgent;return t.ios=!!e.match(/(iphone|ipod|ipad)/i),t.android=!!e.match(/android/i),t.wechat=!!e.match(/micromessenger/i),e=e.match(/msie \d+?/i),t.ie=function(){var t=navigator.userAgent.toLowerCase();return window.ActiveXObject||"ActiveXObject"in window?(t.match(/msie\s(\d+)/)||[])[1]||"11":!1}(),t}(),t.get={param:function(t){var e=new RegExp("(\\?|#|&)"+t+"=([^&#]*)(&|#|$)"),n=location.href.match(e);return decodeURIComponent(n?n[2]:"")},redirect:function(t){var e="?"+(t||"redirect")+"=",n=location.href.split(e),i=n?n[1].match(/http:\/\/([^\/]*)\/?/i)||[]:"";return decodeURIComponent(i)},index:0,path:function(){var t=document.scripts,e=t[t.length-1],n=e.src;return n.substring(0,n.lastIndexOf("/")+1)}(),genId:function(t){return(t||0)+ ++this.index},className:{open:"nui-open"},check:{phone:function(t){return/^1\d{10}$/g.test(t)?void 0:"手机格式不合法"},pass:function(t){return/[a-z0-9]{6,}/g.test(t)?void 0:"密码太过简单"},repass:function(t,e){return e===t?void 0:"两次密码不一致"},email:function(t){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)?void 0:"邮箱格式不正确"},url:function(t){return/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/.test(t)?void 0:"链接格式不正确"},date:function(t){return/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/.test(t)?void 0:"日期格式不正确"},number:function(t){return/^\d+$/.test(t)?void 0:"只能填写数字"},identity:function(t){return/(^\d{15}$)|(^\d{17}(x|X|\d)$)/.test(t)?void 0:"请输入正确的身份证号"},checked:function(t){return this.checked?void 0:t||""},required:function(t,e){return""!==t.replace(/\s/g,"")?void 0:e||"此项不能为空"}}},t.util={stop:function(t){t=t||window.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},randomSize:function(t,e,n){return t=t||0,e=e||10,(t+Math.random()*(e-t)).toFixed(n||0)},drop:function(t,n){var i=e(document),o=e(window),s=t,r=s.find(n),a={};r.on("mousedown",function(t){t.preventDefault(),a.start=!0,a.offset=[t.clientX-parseFloat(s.css("left")),t.clientY-parseFloat(s.css("top"))]}),i.on("mousemove",function(t){if(a.start){var e=t.clientX-a.offset[0],n=t.clientY-a.offset[1],i="fixed"===s.css("position");t.preventDefault(),a.stX=i?0:o.scrollLeft(),a.stY=i?0:o.scrollTop();var r=o.width()-s.outerWidth()+a.stX,c=o.height()-s.outerHeight()+a.stY;e<a.stX&&(e=a.stX),e>r&&(e=r),n<a.stY&&(n=a.stY),n>c&&(n=c),s.css({left:e,top:n})}}).on("mouseup",function(){a.start&&(a.start=null)})},date:{n2s:function(t){return 10>t?"0"+(0|t):t},format:function(t,e){var n;"number"==typeof t&&(t=new Date(t)),n=t.getFullYear();var i=this.n2s(t.getMonth()+1),o=this.n2s(t.getDate()),s=this.n2s(t.getHours()),r=this.n2s(t.getMinutes()),a=this.n2s(t.getSeconds());switch(e){case"yyyy-MM-dd HH:mm:ss":n=n+"-"+i+"-"+o+" "+s+":"+r+":"+a;break;case"yyyy-MM":n=n+"-"+i;break;case"yyyy":break;default:n=n+"-"+i+"-"+o}return n},toDate:function(t){var e,n,i,o,s,r;return 19==t.length?(e=t.substring(0,4),n=t.substring(5,7),i=t.substring(8,10),o=t.substring(11,13),s=t.substring(14,16),r=t.substring(17,19),new Date(e,n-1,i,o,s,r)):10==t.length?(e=t.substring(0,4),n=t.substring(5,7),i=t.substring(8,10),new Date(e,n-1,i)):7==t.length?(e=t.substring(0,4),n=t.substring(5,7),new Date(e,n-1)):4==t.length?(e=t.substring(0,4),new Date(e)):void 0},countDown:function(t){var e,n,i=(this.toDate(t)-this.toDate(this.now("yyyy-MM-dd HH:mm:ss")))/1e3;return i>0?(t=Math.floor(i/86400),e=Math.floor(i/3600)-24*t,n=Math.floor(i/60)-60*e-1440*t,i=Math.floor(i%60)):t=e=n=i=0,{dd:this.n2s(t),d:t,HH:this.n2s(e),H:e,mm:this.n2s(n),m:n,ss:this.n2s(i),s:i}},now:function(t,e){"string"==typeof t&&(e=t);var n,i=Date;return 0|t?(n=parseInt(t),n=864e5>n?+new Date+864e5*n:n):n=+new Date,i=new i(n),e?this.format(i,e):this.format(i)},history:function(t,e){"string"==typeof t&&(t=this.toDate(t));var n=(new Date).getTime()-t;return n>2592e6?this.format(t,e):n>=864e5?(n/1e3/60/60/24|0)+"天前":n>=36e5?(n/1e3/60/60|0)+"小时前":n>=3e5?(n/1e3/60|0)+"分钟前":"刚刚"}}},t.http=function(n,i,o,s){t.log(n,"http-url"),"function"==typeof i?(s=o,o=i):t.log(i,"http-data"),s=s||{},i=i||{};var r={},a=r.http||{};return e.ajax({type:s.type||"post",dataType:s.dataType||"json",data:i,url:n,timeout:s.timeout||1e4,success:function(e){a.success?a.success(e,o):(o&&o(e),!s.dataType&&t.log(e,"http-success"))},error:function(e){a.error?a.error(e):s.error||t.log("请求异常，请重试","http-error","red")}})},t.cookie=function(t,n,i){t=t||"";var o,s,r;if("undefined"==typeof n){if(n=null,document.cookie&&""!=document.cookie)for(i=document.cookie.split(";"),s=0;s<i.length;s++)if(o=e.trim(i[s]),o.substring(0,t.length+1)==t+"="){n=decodeURIComponent(o.substring(t.length+1));break}return n}i=i||{},null===n&&(n="",i.expires=-1),o="",i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(s=new Date,s.setTime(s.getTime()+864e5*i.expires)):s=i.expires,o="; expires="+s.toUTCString()),s=i.path?"; path="+i.path:"",r=i.domain?"; domain="+i.domain:"",i=i.secure?"; secure":"",document.cookie=[t,"=",encodeURIComponent(n),o,s,r,i].join("")},t.store=function(t,e){return window.localStorage?function(){if("string"==typeof t){if(null===e)return window.localStorage.removeItem(t);if("undefined"==typeof e){e=window.localStorage.getItem(t);try{return JSON.parse(e)}catch(n){}return e}return e="object"==typeof e?JSON.stringify(e):e,window.localStorage.setItem(t,e)}return window.localStorage.clear()}():this.log("no store","error"),!1},t.tpl=function(t,e,n){var i={open:"{{",close:"}}"},o={exp:function(t){return new RegExp(t,"g")},query:function(t,e,n){return s((e||"")+i.open+["#([\\s\\S])+?","([^{#}])*?"][t||0]+i.close+(n||""))},escape:function(t){return String(t||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(t,e){return"object"==typeof console&&console.error("tpl Error："+t+"\n"+(e||"")),"tpl Error："+t}},s=o.exp,r=function(t){this.tpl=t};r.pt=r.prototype,window.errors=0,r.pt.parse=function(t,e){var n=t,r=s("^"+i.open+"#",""),a=s(i.close+"$","");t=t.replace(/\s+|\r|\t|\n/g," ").replace(s(i.open+"#"),i.open+"# ").replace(s(i.close+"}"),"} "+i.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(o.query(),function(t){return t=t.replace(r,"").replace(a,""),'";'+t.replace(/\\/g,"")+';view+="'}).replace(o.query(1),function(t){var e='"+(';return t.replace(/\s/g,"")===i.open+i.close?"":(t=t.replace(s(i.open+"|"+i.close),""),/^=/.test(t)&&(t=t.replace(/^=/,""),e='"+_escape_('),e+t.replace(/\\/g,"")+')+"')}),t='"use strict";var view = "'+t+'";return view;';try{return this.cache=t=new Function("d, _escape_",t),t(e,o.escape)}catch(c){return delete this.cache,o.error(c,n)}},r.pt.render=function(t,e){var n;return t?(n=this.cache?this.cache(t,o.escape):this.parse(this.tpl,t),console.log(),e?void e(n):n):o.error("no data")};var a=function(t){return"string"!=typeof t?o.error("Template not found"):new r(t)};return a.config=function(t){t=t||{};for(var e in t)i[e]=t[e]},n?(a(t).render(e,n),this):a(t).render(e)},t.upload=function(t,n){function i(t){return"[object String]"===Object.prototype.toString.call(t)}function o(t){if(!t)return[];var e,n=[];for(var i in t)e=document.createElement("input"),e.type="hidden",e.name=i,e.value=t[i],n.push(e);return n}function s(t){if(!t)return{};for(var e={},n=t.split("&"),i=function(t){return decodeURIComponent(t.replace(/\+/g," "))},o=0;o<n.length;o++){var s=n[o].split("="),r=i(s[0]),a=i(s[1]);e[r]=a}return e}function r(t){for(var e=t.parentsUntil("body"),n=0,i=0;i<e.length;i++){var o=e.eq(i);"static"!==o.css("position")&&(n=parseInt(o.css("zIndex"),10)||n)}return n}function a(){var t="iframe-uploader-"+c,n=e('<iframe name="'+t+'" />').hide();return c+=1,n}if("object"==typeof t){t.elem&&(t.trigger=t.elem);var c=0,f=function(t){if(!(this instanceof f))return new f(t);i(t)&&(t={trigger:t});var n={trigger:null,name:null,action:null,data:null,accept:null,change:null,error:null,multiple:!1,success:null};t&&e.extend(n,t);var o=e(n.trigger);n.action=n.action||o.data("action")||"/upload",n.name=n.name||o.attr("name")||o.data("name")||"file",n.data=n.data||s(o.data("data")),n.accept=n.accept||o.data("accept"),n.success=n.success||o.data("success"),this.settings=n,this.setup(),this.bind()};f.prototype.setup=function(){this.form=e('<form method="post" enctype="multipart/form-data"target="" action="'+this.settings.action+'" />'),this.iframe=a(),this.form.attr("target",this.iframe.attr("name"));var t=this.settings.data;this.form.append(o(t)),this.form.append(window.FormData?o({_uploader_:"formdata"}):o({_uploader_:"iframe"}));var n=document.createElement("input");n.type="file",n.name=this.settings.name,this.settings.accept&&(n.accept=this.settings.accept),this.settings.multiple&&(n.multiple=!0,n.setAttribute("multiple","multiple")),this.input=e(n);var i=e(this.settings.trigger);return this.input.attr("hidefocus",!0).css({position:"absolute",top:0,right:0,opacity:0,outline:0,cursor:"pointer",height:i.outerHeight(),fontSize:Math.max(64,5*i.outerHeight())}),this.form.append(this.input),this.form.css({position:"absolute",top:i.offset().top,left:i.offset().left,overflow:"hidden",width:i.outerWidth(),height:i.outerHeight(),zIndex:r(i)+10}).appendTo("body"),this},f.prototype.bind=function(){var t=this,n=e(t.settings.trigger);n.mouseenter(function(){t.form.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(),height:n.outerHeight()})}),t.bindInput()},f.prototype.bindInput=function(){var t=this;t.input.change(function(e){t._files=this.files||[{name:e.target.value}];var n=t.input.val();if(t.settings.change)t.settings.change.call(t,t._files);else if(n)return t.submit()})},f.prototype.submit=function(){var t=this;if(window.FormData&&t._files){var n=new FormData(t.form.get(0));n.append(t.settings.name,t._files);var i;if(t.settings.progress){var o=t._files;i=function(){var n=e.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(e){var n=0,i=e.loaded||e.position,s=e.total;e.lengthComputable&&(n=Math.ceil(i/s*100)),t.settings.progress(e,i,s,n,o)},!1),n}}return e.ajax({url:t.settings.action,type:"post",processData:!1,contentType:!1,data:n,xhr:i,context:this,success:t.settings.success,error:t.settings.error}),this}return t.iframe=a(),t.form.attr("target",t.iframe.attr("name")),e("body").append(t.iframe),t.iframe.one("load",function(){e('<iframe src="javascript:false;"></iframe>').appendTo(t.form).remove();var n;try{n=e(this).contents().find("body").html()}catch(i){n="cross-domain"}e(this).remove(),n?t.settings.success&&t.settings.success(n):t.settings.error&&t.settings.error(t.input.val())}),t.form.submit(),this},f.prototype.refreshInput=function(){var t=this.input.clone();this.input.before(t),this.input.off("change"),this.input.remove(),this.input=t,this.bindInput()},f.prototype.change=function(t){return t?(this.settings.change=t,this):this},f.prototype.success=function(t){var e=this;return this.settings.success=function(n){e.refreshInput(),t&&t(n)},this},f.prototype.error=function(t){var e=this;return this.settings.error=function(n){t&&(e.refreshInput(),t(n))},this},f.prototype.enable=function(){this.input.prop("disabled",!1),this.input.css("cursor","pointer")},f.prototype.disable=function(){this.input.prop("disabled",!0),this.input.css("cursor","not-allowed")};var u=function(t){if(!(this instanceof u))return new u(t);i(t)&&(t={trigger:t});var n=e(t.trigger),o=[];n.each(function(e,n){t.trigger=n,o.push(new f(t))}),this._uploaders=o};return u.prototype.submit=function(){return e.each(this._uploaders,function(t,e){e.submit()}),this},u.prototype.change=function(t){return e.each(this._uploaders,function(e,n){n.change(t)}),this},u.prototype.success=function(t){return e.each(this._uploaders,function(e,n){n.success(t)}),this},u.prototype.error=function(t){return e.each(this._uploaders,function(e,n){n.error(t)}),this},u.prototype.enable=function(){return e.each(this._uploaders,function(t,e){e.enable()}),this},u.prototype.disable=function(){return e.each(this._uploaders,function(t,e){e.disable()}),this},u.Uploader=f,new u(t).success(n)}},t.form=function(n,i){"function"==typeof n?(i=n,n={}):n=n||{};var o={},s={check:t.get.check,times:0,submit:function(i){var o=i.find("[name]"),r={},a=!0,c="";return o.each(function(){try{var i,o=e(this),f=o.attr("data-check")||o.attr("check"),u=o.attr("name"),l=o.val();if(f){switch(n.check&&typeof n.check[f]||typeof s.check[f]){case"function":switch(f){case"pass":c=o.val(),i=s.check[f](l);break;case"repass":i=s.check[f](l,c);break;case"checked":var d=this.getAttribute("title");d&&(i=s.check.checked.call(this,d));break;default:i=s.check[f](l)}break;default:i=s.check.required(l,f)}if(i)return a=!1,o.focus(),"function"==typeof n.message?n.message.call(this,u,o):t.alert(i),a}if(!s.check.required(l)&&u){var h=(this.tagName.toLowerCase(),this.type);"radio"===h?this.checked&&(r[u]=l):"checkbox"===h?(r[u]=r[u]||[],this.checked&&r[u].push(l)):r[u]=l}}catch(p){t.log(p,"error")}}),a&&s.action.call(this,r),!1},action:function(o){t.log(o,"数据");var s=e(this),r=s.attr("action")||n.url;r?t.http(r,o||{},i):t.log("data-form,no url !","error")}},r={checkbox:function(t){var n=this,i=t||"checkbox",o=e(n).find("input[type="+i+"]");return o.each(function(){var t=e(this),n={id:t.attr("id")||"",css:"nui-form-"+(this.getAttribute("role")||i)+"-label",checked:function(t){"radio"!==i?this.checked?t.addClass("checked"):t.removeClass("checked"):o.each(function(){var t=e(this),i=t.next("."+n.css);this.checked?i.addClass("checked"):i.removeClass("checked")})},event:function(t,e,i){var o=this;t.on("click",function(){i||(o.checked=!o.checked),e.trigger("change")}),e.on("change",function(){n.checked.call(o,t)})}};t.css({position:"absolute",clip:"rect(0,0,0,0)"}),t.after(e("<label class="+n.css+' for="'+n.id+'"></label>')),n.label=t.next("."+n.css),n.checked.call(this,n.label),n.event.call(this,n.label,t,n.id),t.attr("disabled")&&t.next().addClass("is-disabled")})},select:function(){var t,n=e("select",this),i=".nui-form-select-text",o="ul",s="nui-form-select";return t=function(t,n){var r=e(i,t);r.on("click",function(n){var i=e(o,t),r=e(o,"."+s);n.stopPropagation(),function(t){r.hide().parent().removeClass(t),i.show().parent().addClass(t)}(s+"ed"),function(t){e(document).one("click",function(){i.hide().parent().removeClass(t)})}(s+"ed")}),t.find("li").on("click",function(){var t=e(this),i=t.attr("data-value");t.addClass("this").siblings().removeClass("this"),r.find("span").html(t.find("a").html()),n.val(i).trigger("change")})},n.each(function(){var n=e(this),i=n.val(),o=this.selectedIndex,s=e(this.options[o]),r=e(function(){for(var t="<ul>",e=n.find("option"),i=0;i<e.length;i++)t+='<li data-value="'+e.eq(i).val()+'"><a href="javascript:;">'+(e.eq(i).html()||e.eq(i).val())+"</a></li>";return t+"</ul>"}()),a=e('<div class="nui-form-select"><div class="nui-form-select-text nui-input"><span>'+(s.html()||i)+"</span><i></i></div>"+r.prop("outerHTML")+"</div>");a.find("ul li").eq(o).addClass("this"),n.hide(),n.after(a),t(n.next(),n)}),this}};return o.form=n.form,o.btn=n.btn,n.form&&e(o.form).each(function(){var t=e(this);e("[data-form]",this)[0]||this.getAttribute("data-form")||(r.checkbox.call(this),r.checkbox.call(this,"radio"),r.select.call(this),this.setAttribute("data-form",!0)),"function"==typeof i&&"form"===this.tagName.toLowerCase()?function(n){o.btn&&e(o.btn,t).on("click",function(){return"a"===n.tagName.toLowerCase()&&t.trigger("submit"),!1}),t.off("submit").on("submit",function(){return s.submit.call(this,t),!1})}(this):o.btn&&t.on("click",o.btn,function(){return s.submit.call(this,t),!1})}),this},t.close=function(n){var i,o=t.get.className.open,s=function(t){t.hasClass("is-remove")||(t.addClass("is-remove"),setTimeout(function(){t.remove()},350))};if("string"==typeof n)i=o+"-"+n,s(e("."+i));else if("number"==typeof n){i=n?o+n:o;var r=n?o+"-shade"+n:o+"-shade";s(e("#"+r)),s(e("#"+i))}else s(e("."+o)),s(e("."+o+"-shade"))},t.open=function(n){var i={query:e,v:"0.0.1",type:["dialog","msg","iframe","toptips","tips"],doms:[],index:t.get.genId(),className:t.get.className.open,tpl:t.tpl},o=i.query(window);return i.config={type:0|n.type,content:n.content||"",shade:n.shadow,skin:n.skin||"",fixed:!!n.fixed,title:n.title,move:n.move,offset:n.offset||"auto",area:n.width||n.area||"auto",time:n.time,zIndex:20170513,success:"function"==typeof n.success?n.success:!1,cancel:"function"==typeof n.cancel?n.cancel:!1},i.setConfig=function(e){if(!this.query("#"+i.className+i.index)[0]){var o=this,s=0,r=i.config,a=["shade","title","close","content","hd","bd"];for(s in a)i.doms[a[s]]=i.className+"-"+a[s]||"";if(!(r.type>4)){"string"==typeof r.area&&(r.area="auto"===r.area?["",""]:[r.area,""]);var c=(r.content,"object"==typeof r.content);if(!c){var f=function(t,e){return"undefined"==typeof t?e:t};switch(r.type){case 0:r.title=f(r.title,"信息"),r.move=f(r.move,!0),r.shade=f(r.shade,.3);break;case 1:o.close("msg"),r.time=f(r.time,2);break;case 2:t.close(),r.title=f(r.title,"窗体"),r.move=f(r.move,!0),r.shade=f(r.shade,.3),r.content=c?r.content:[r.content,"auto"],r.content='<iframe scrolling="'+(r.content[1]||"auto")+'" allowtransparency="true" onload="this.className=\'\';" class="" frameborder="0" src="'+r.content[0]+'"></iframe>';break;case 3:o.close("toptips"),r.title=!1,r.time=f(r.time,10),r.offset="t";break;case 4:if(!n.elem)return;o.close("tips")}r.time=0|r.time,e&&e.call(this)}}}},i.createElement=function(){var t=i,e=t.config.title?i.tpl('<div class="{{ d.doms.title }}">{{ d.config.title}}</div>',t):"",n='<div class="'+t.doms.hd+(t.config.move?" is-move":"")+'" >'+e+"<i class="+t.doms.close+"></i></div>",o='<div  class="'+t.doms.bd+'">'+t.config.content+"</div>";t.html=n+o,t.shade=t.className+"-shade"+t.index;var s=i.tpl('\r\n                    {{# if(d.config.shade) { var color = "#000" ,opacity =  d.config.shade + ";filter:alpha(opacity=" +d.config.shade * 100 + ")" ; }} \r\n                        <div class="{{ d.doms.shade }}" id="{{ d.shade }}" style="z-index:{{ d.config.zIndex - 1 }}; background-color:{{ color }}; opacity:{{ opacity }};"></div> \r\n                    {{# } }}\r\n                    {{# var type = d.type[d.config.type], \r\n                            classType = d.className+"-"+type,\r\n                            classBorder = (d.config.type == 0 || d.config.type == 2) && !d.config.shade ? d.doms.border : "" ,\r\n                            classSkin = d.config.skin,\r\n                            classStyle = "z-index:" + d.config.zIndex + "; width:" + d.config.area[0] + ";height:" + d.config.area[1] + (d.config.fixed ? "" : ";position:absolute;") ; }} \r\n                    <div class="{{ d.className }} {{ classSkin }} {{ classType }}" id="{{ d.className+d.index }}" style="{{ classStyle }}" >\r\n                       {{ d.html }}\r\n                    </div>',t);return t=null,s},i.auto=function(t){function e(t){t=r.find(t),t.height(a[1]-c-f-2*(0|parseFloat(t.css("padding"))))}var n=this,s=n.config,r=n.that=n.query("#"+i.className+t),a=[r.innerWidth(),r.innerHeight()],c=r.find("."+i.doms.hd,r).outerHeight()||0,f=r.find("."+i.doms.fd).outerHeight()||0;switch(s.type){case 2:e("iframe");break;default:""===s.area[1]?s.fixed&&a[1]>=o.height()&&(a[1]=o.height(),e("."+i.doms.bd)):e("."+i.doms.bd)}return n},i.offset=function(){var t=this,e=t.config,i=t.that,s=[i.outerWidth(),i.outerHeight()],r="object"==typeof e.offset;if(t.offsetTop=(o.height()-s[1])/2,t.offsetLeft=(o.width()-s[0])/2,r?(t.offsetTop=e.offset[0],t.offsetLeft=e.offset[1]||t.offsetLeft):"auto"!==e.offset&&("t"===e.offset?t.offsetTop=0:"r"===e.offset?t.offsetLeft=o.width()-s[0]:"b"===e.offset?t.offsetTop=o.height()-s[1]:"l"===e.offset?t.offsetLeft=0:"lt"===e.offset?(t.offsetTop=0,t.offsetLeft=0):"lb"===e.offset?(t.offsetTop=o.height()-s[1],t.offsetLeft=0):"rt"===e.offset?(t.offsetTop=0,t.offsetLeft=o.width()-s[0]):"rb"===e.offset?(t.offsetTop=o.height()-s[1],t.offsetLeft=o.width()-s[0]):t.offsetTop=e.offset),e.fixed||(t.offsetTop=/%$/.test(t.offsetTop)?o.height()*parseFloat(t.offsetTop)/100:parseFloat(t.offsetTop),t.offsetLeft=/%$/.test(t.offsetLeft)?o.width()*parseFloat(t.offsetLeft)/100:parseFloat(t.offsetLeft),t.offsetTop+=o.scrollTop(),t.offsetLeft+=o.scrollLeft()),i.css({top:t.offsetTop,left:t.offsetLeft}),4===e.type){var a=this.query(n.elem);i.css({top:a.offset().top+a.outerHeight(),left:a.offset().left}),e.area[0]||i.css({width:a.innerWidth(),borderTop:0})}return t},i.move=function(){var e=t.util.drop;return this.config.move&&this.config.title&&e(this.that,"."+this.doms.title),this},i.append=function(t){this.query(document.body).append(i.createElement()),t&&t.call(this)},i.callback=function(){var e=this.that,n=this.config,i=this.doms,o=this.index;n.success&&(2==n.type?e.find("iframe").on("load",function(){n.success.call(e.find("iframe").contents()[0],e,o)}):n.success.call(e[0],e,o));var s=function(){return n.cancel?n.cancel(o,e):t.close(o)};return e.find("."+i.close).on("click",s),this},i.close=function(e){var n=this.index;return e?t.close(e):i.config.time>0&&setTimeout(function(){t.close(n)},1e3*i.config.time),this},i.init=function(){var t=this.index;return this.setConfig(function(){this.append(function(){this.auto(t).offset().move().callback().close(),i=null})}),t},i.init()},t.alert=function(t,e){nui.open({content:t,type:1,fixed:!0,time:e||2})},t.page=function(t,n){var i=e,o=function(){};return o.prototype.config=function(t){return this.that=i(t.elem),this.index=1|t.index,this.pages=5,this},o.prototype.success=function(t){return this.render(),t&&t(this),this},o.prototype.render=function(t){for(var e=this.index,n=this.index+this.pages,i="",o=e;n>o;o++)i+='<a data-page="'+o+'">'+o+"</a>";this.that.html('<div class="nui-pages">'+i+"<div>"),t&&t.call(this)},o.prototype.event=function(){var t=this;return t.that.on("click","[data-page]",function(){t.index=1|parseInt(this.getAttribute("data-page")),t.success(n)}),t},o.prototype.init=function(){return this.render(function(){this.event()}),this},(new o).config(t).init().success(n)},t.tab=function(){var t=e,n="#tab_",i=location.hash.split(n)[1],o=document.getElementById(i);if(o){var s=o.className.split(" ");t("[data-tab]").each(function(){var e=t(this),n=e.attr("data-tab");for(var o in s)if(s[o].indexOf(n)){n=n.split("|"),n[3]&&t(n[3],t(n[2])).each(function(o){this.id===i&&(t(n[0],e).eq(o).addClass(n[1]).siblings().removeClass(n[1]),t(this).show().siblings(n[3]).hide())});break}})}return function(){var e=t(this),i=e.attr("data-tab").split("|");typeof i==typeof[]||(i=["a","this"]),t(i[0],e).on("click",function(){var o=t(this),s=o.index(),r=i[3];o.addClass(i[1]).siblings().removeClass(i[1]),r&&t(r,i[2]).eq(s).show().each(function(){this.id&&(location.hash=n+this.id)}).siblings(r).hide(),e.trigger("nui(tab)",{el:o,tab:t(r,i[2]),index:s})})}}();!function(){e("[data-tab]").each(function(){t.tab.call(this)}),t.form({form:".nui-form"})}();return t},"function"==typeof define?define(function(e){var n=e("jquery");return t.init(n)}):window.nui=t.init($)}();