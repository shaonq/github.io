(function(){"use strict";var e={v:"0.2.0"};e.log=window.console?function(e,t,n){location.hostname==="localhost"&&e&&"error"===t&&(n="red"),"success"===t&&(n="green"),console.log("%c"+(t||"info")+" ","color:"+(n||"blue")+";",e)}:function(){window.console={log:function(){}}}();e.loadJs=function(e,t){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.onload=i.onreadystatechange=i.onerror=function(){i&&i.readyState&&/^(?!(?:loaded|complete)$)/.test(i.readyState)||(i.onload=i.onreadystatechange=i.onerror=null,i.src="",i.parentNode.removeChild(i),i=null,t&&t())},i.src=e;try{n.appendChild(i)}catch(s){}};e.loadCss=function(e,t){var n=document.getElementsByTagName("head")[0],i=document.createElement("link"),s=document.getElementById(t);i.onload=i.onreadystatechange=i.onerror=null,i.rel="stylesheet",i.href=e;try{s?i=null:(t&&(i.id=t),n.appendChild(i))}catch(o){}};e.init=function(t){e.is=function(){var e={},t=navigator.userAgent;return e.ios=!!t.match(/(iphone|ipod|ipad)/i),e.android=!!t.match(/android/i),e.wechat=!!t.match(/micromessenger/i),t=t.match(/msie \d+?/i),e.ie=function(){var e=navigator.userAgent.toLowerCase();return window.ActiveXObject||"ActiveXObject"in window?(e.match(/msie\s(\d+)/)||[])[1]||"11":!1}(),e}();e.get={param:function(e){var t=new RegExp("(\\?|#|&)"+e+"=([^&#]*)(&|#|$)"),n=location.href.match(t);return decodeURIComponent(!n?"":n[2])},redirect:function(e){var t="?"+(e||"redirect")+"=",n=location.href.split(t);var i=!n?"":n[1].match(/http:\/\/([^\/]*)\/?/i)||[];return decodeURIComponent(i)},index:0,path:function(){var e=document.scripts,t=e[e.length-1],n=t.src;return n.substring(0,n.lastIndexOf("/")+1)}(),genId:function(e){return(e||0)+ ++this.index},className:{open:"nui-open"},check:{phone:function(e){return/^1\d{10}$/g.test(e)?void 0:"手机格式不合法"},pass:function(e){return/[a-z0-9]{6,}/g.test(e)?void 0:"密码太过简单"},repass:function(e,t){return t===e?void 0:"两次密码不一致"},email:function(e){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void 0:"邮箱格式不正确"},url:function(e){return/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/.test(e)?void 0:"链接格式不正确"},date:function(e){return/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/.test(e)?void 0:"日期格式不正确"},number:function(e){return/^\d+$/.test(e)?void 0:"只能填写数字"},identity:function(e){return/(^\d{15}$)|(^\d{17}(x|X|\d)$)/.test(e)?void 0:"请输入正确的身份证号"},checked:function(e){return this.checked?void 0:e||""},required:function(e,t){return""!==e.replace(/\s/g,"")?void 0:t||"此项不能为空"}}};e.util={stop:function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},randomSize:function(e,t,n){return e=e||0,t=t||10,(e+Math.random()*(t-e)).toFixed(n||0)},drop:function(e,n){var i=t(document),s=t(window),o=e,a=o.find(n),r={};a.on("mousedown",function(e){e.preventDefault(),r.start=!0,r.offset=[e.clientX-parseFloat(o.css("left")),e.clientY-parseFloat(o.css("top"))]}),i.on("mousemove",function(e){if(r.start){var t=e.clientX-r.offset[0],n=e.clientY-r.offset[1],i="fixed"===o.css("position");e.preventDefault(),r.stX=i?0:s.scrollLeft(),r.stY=i?0:s.scrollTop();var a=s.width()-o.outerWidth()+r.stX,c=s.height()-o.outerHeight()+r.stY;t<r.stX&&(t=r.stX),t>a&&(t=a),n<r.stY&&(n=r.stY),n>c&&(n=c),o.css({left:t,top:n})}}).on("mouseup",function(){r.start&&(r.start=null)})},date:{n2s:function(e){return 10>e?"0"+(e|0):e},format:function(e,t){var n;typeof e==="number"&&(e=new Date(e));n=e.getFullYear();var i=this.n2s(e.getMonth()+1),s=this.n2s(e.getDate()),o=this.n2s(e.getHours()),a=this.n2s(e.getMinutes()),r=this.n2s(e.getSeconds());switch(t){case"yyyy-MM-dd HH:mm:ss":n=n+"-"+i+"-"+s+" "+o+":"+a+":"+r;break;case"yyyy-MM":n=n+"-"+i;break;case"yyyy":break;default:n=n+"-"+i+"-"+s}return n},toDate:function(e){var t,n,i,s,o,a;if(19==e.length)return t=e.substring(0,4),n=e.substring(5,7),i=e.substring(8,10),s=e.substring(11,13),o=e.substring(14,16),a=e.substring(17,19),new Date(t,n-1,i,s,o,a);if(10==e.length)return t=e.substring(0,4),n=e.substring(5,7),i=e.substring(8,10),new Date(t,n-1,i);if(7==e.length)return t=e.substring(0,4),n=e.substring(5,7),new Date(t,n-1);if(4==e.length)return t=e.substring(0,4),new Date(t)},countDown:function(e){var t=(this.toDate(e)-this.toDate(this.now("yyyy-MM-dd HH:mm:ss")))/1e3,n,i;0<t?(e=Math.floor(t/86400),n=Math.floor(t/3600)-24*e,i=Math.floor(t/60)-60*n-1440*e,t=Math.floor(t%60)):e=n=i=t=0;return{dd:this.n2s(e),d:e,HH:this.n2s(n),H:n,mm:this.n2s(i),m:i,ss:this.n2s(t),s:t}},now:function(e,t){typeof e==="string"&&(t=e);var n=Date,i;e|0?(i=parseInt(e),i=864e5>i?+new Date+864e5*i:i):i=+new Date;n=new n(i);return t?this.format(n,t):this.format(n)},history:function(e,t){"string"===typeof e&&(e=this.toDate(e));var n=(new Date).getTime()-e;return 2592e6<n?this.format(e,t):864e5<=n?(n/1e3/60/60/24|0)+"天前":36e5<=n?(n/1e3/60/60|0)+"小时前":3e5<=n?(n/1e3/60|0)+"分钟前":"刚刚"}}};e.http=function(n,i,s,o){e.log(n,"http-url");"function"===typeof i?(o=s,s=i):e.log(i,"http-data");o=o||{};i=i||{};var a={};var r=a.http||{};return t.ajax({type:o.type||"post",dataType:o.dataType||"json",data:i,url:n,timeout:o.timeout||1e4,success:function(t){r.success?r.success(t,s):(s&&s(t),!o.dataType&&e.log(t,"http-success"))},error:function(t){r.error?r.error(t):o.error?o.error(t):e.log("请求异常，请重试","http-error","red")}})};e.cookie=function(e,n,i){e=e||"";var s,o,a;if("undefined"==typeof n){if(n=null,document.cookie&&""!=document.cookie)for(i=document.cookie.split(";"),o=0;o<i.length;o++)if(s=t.trim(i[o]),s.substring(0,e.length+1)==e+"="){n=decodeURIComponent(s.substring(e.length+1));break}return n}i=i||{};null===n&&(n="",i.expires=-1);s="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(o=new Date,o.setTime(o.getTime()+864e5*i.expires)):o=i.expires,s="; expires="+o.toUTCString());o=i.path?"; path="+i.path:"";a=i.domain?"; domain="+i.domain:"";i=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(n),s,o,a,i].join("")};e.store=function(e,t){return window.localStorage&&typeof JSON?function(){if(typeof e==="string"){if(typeof t==="undefined"){t=window.localStorage.getItem(e);return JSON.parse(t)||t}else{t=typeof t==="object"?JSON.stringify(t):t;return window.localStorage.setItem(e,t)}}else{return window.localStorage.clear()}}():void 0};e.tpl=function(e,t,n){var i={open:"{{",close:"}}"},s={exp:function(e){return new RegExp(e,"g")},query:function(e,t,n){return o((t||"")+i.open+["#([\\s\\S])+?","([^{#}])*?"][e||0]+i.close+(n||""))},escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(e,t){return"object"==typeof console&&console.error("tpl Error："+e+"\n"+(t||"")),"tpl Error："+e}},o=s.exp,a=function(e){this.tpl=e};a.pt=a.prototype,window.errors=0,a.pt.parse=function(e,t){var n=e,a=o("^"+i.open+"#",""),r=o(i.close+"$","");e=e.replace(/\s+|\r|\t|\n/g," ").replace(o(i.open+"#"),i.open+"# ").replace(o(i.close+"}"),"} "+i.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(s.query(),function(e){return e=e.replace(a,"").replace(r,""),'";'+e.replace(/\\/g,"")+';view+="'}).replace(s.query(1),function(e){var t='"+(';return e.replace(/\s/g,"")===i.open+i.close?"":(e=e.replace(o(i.open+"|"+i.close),""),/^=/.test(e)&&(e=e.replace(/^=/,""),t='"+_escape_('),t+e.replace(/\\/g,"")+')+"')}),e='"use strict";var view = "'+e+'";return view;';try{return this.cache=e=new Function("d, _escape_",e),e(t,s.escape)}catch(c){return delete this.cache,s.error(c,n)}},a.pt.render=function(e,t){var n;return e?(n=this.cache?this.cache(e,s.escape):this.parse(this.tpl,e),t?void t(n):n):s.error("no data")};var r=function(e){return"string"!=typeof e?s.error("Template not found"):new a(e)};return r.config=function(e){e=e||{};for(var t in e)i[t]=e[t]},n?(r(e).render(t,n),this):r(e).render(t)};e.upload=function(e){var n=function(e){this.options=e},i="nui-iframe-uploader";n.prototype.init=function(){var e=this,n=e.options,s=t("body"),o=t(n.elem),a=t('<iframe id="'+i+'" height="0" width="0" frameborder="0" style="position: absolute; visibility: hidden" class="'+i+'" name="'+i+'"></iframe>');return document.getElementById(i)||s.append(a),o.each(function(s,o){o=t(o);var a='<form target="'+i+'" method="'+(n.method||"post")+'"  enctype="multipart/form-data" action="'+(n.url||"")+'"></form>';a=t(a),o.wrap(a),o.off("change").on("change",function(){e.action(this)})})},n.prototype.error=function(e){var t=this,n=t.options;"function"===typeof n.error?n.error(e):console.error(e)},n.prototype.action=function(e,n){var s=this,o=s.options,a=e.value,r=t(e),c=o.ext||"";if(a){if(c&&!RegExp("\\w\\.("+c+")$","i").test(escape(a)))return s.error("不支持该文件格式"),e.value="";o.before&&o.before(e),r.parent().submit();var f=t("#"+i),l=setInterval(function(){var e;try{e=f.contents().find("body").text()}catch(t){s.error("上传接口存在跨域"),clearInterval(l)}if(e){clearInterval(l),f.contents().find("body").html("");try{e=JSON.parse(e)}catch(t){return e={},s.error("数据异常")}"function"===typeof o.success&&o.success(e,t)}},30);e.value=""}},new n(e=e||{}).init()};e.form=function(n,i){n=typeof n==="object"?n:{};i=typeof i==="function"?i:n.success;var s={},o={check:e.get.check,times:0,submit:function(i){var s=i.find("[name]"),a={},r=!0,c="";return s.each(function(){try{var i=t(this),s=i.attr("data-check")||i.attr("check"),f=i.attr("name"),l=i.val(),u;if(s){switch(n.check&&typeof n.check[s]||typeof o.check[s]){case"function":switch(s){case"pass":c=i.val();u=o.check[s](l);break;case"repass":u=o.check[s](l,c);break;case"checked":var d=this.getAttribute("title");d&&(u=o.check.checked.call(this,d));break;default:u=o.check[s](l);break}break;default:u=o.check.required(l,s);break}if(u)return r=!1,i.focus(),typeof n.message==="function"?n.message.call(this,f,i):e.alert(u),r}if(!o.check.required(l)&&f){var h=this.tagName.toLowerCase(),p=this.type;if(p==="radio"){this.checked&&(a[f]=l)}else if(p==="checkbox"){a[f]=a[f]||[],this.checked&&a[f].push(l)}else a[f]=l}}catch(m){e.log(m,"error")}}),r&&o.action.call(this,a),!1},action:function(s){var o=t(this),a=o.attr("action")||n.url;a?e.http(a,s||{},i):e.log("data-form,no url !","error")}},a={checkbox:function(e){var n=this,i=e||"checkbox",s=t(n).find("input[type="+i+"]");return s.each(function(){var e=t(this),n={id:e.attr("id")||"",css:"nui-form-"+(this.getAttribute("role")||i)+"-label",checked:function(e){i!=="radio"?this.checked?e.addClass("checked"):e.removeClass("checked"):s.each(function(){var e=t(this),i=e.next("."+n.css);this.checked?i.addClass("checked"):i.removeClass("checked")})},event:function(e,t,i){var s=this;e.on("click",function(){i||(s.checked=!s.checked),t.trigger("change")}),t.on("change",function(){n.checked.call(s,e)})}};e.css({position:"absolute",clip:"rect(0,0,0,0)"}),e.after(t("<label class="+n.css+' for="'+n.id+'"></label>')),n.label=e.next("."+n.css),n.checked.call(this,n.label),n.event.call(this,n.label,e,n.id);e.attr("disabled")&&e.next().addClass("is-disabled")})},select:function(){var e,n=t("select",this),i=".nui-form-select-text",s=".nui-form-select-list",o="nui-form-select";return e=function(e,n){var a=t(i,e);a.on("click",function(n){var i=t(s,e),a=t(s,"."+o);n.stopPropagation(),function(e){a.hide().parent().removeClass(e),i.show().parent().addClass(e)}(o+"ed"),function(e){t(document).one("click",function(){i.hide().parent().removeClass(e)})}(o+"ed")}),e.find("a").on("click",function(){var e=t(this),i=e.attr("data-value");e.addClass("this").siblings().removeClass("this");a.find("span").html(e.html()),n.val(i).trigger("change")})},n.each(function(){var n=t(this),i=n.val(),o=this.selectedIndex,a=t(this.options[o]),r=t(function(){for(var e='<div class="nui-form-select-list"><div class="nui-dropdown">',t=n.find("option"),i=0;i<t.length;i++)e+='<a class="nui-dropdown-item" data-value="'+t.eq(i).val()+'">'+(t.eq(i).html()||t.eq(i).val())+"</a>";return e+"</div></div>"}()),c=t('<div class="nui-form-select"><div class="nui-form-select-text nui-input"><span>'+(a.html()||i)+"</span><i></i></div>"+r.prop("outerHTML")+"</div>");c.find(s).find("a").eq(o).addClass("this"),n.hide(),n.after(c),e(n.next(),n)}),this}};return s.form=n.form,s.btn=n.btn,n.form&&t(s.form).each(function(){var e=t(this);t("[data-form]",this)[0]||this.getAttribute("data-form")||(a.checkbox.call(this),a.checkbox.call(this,"radio"),a.select.call(this),this.setAttribute("data-form",!0));typeof i==="function"&&"form"===this.tagName.toLowerCase()?function(n){s.btn&&t(s.btn,e).on("click",function(){return"a"===n.tagName.toLowerCase()&&e.trigger("submit"),!1});e.off("submit").on("submit",function(){return o.submit.call(this,e),!1})}(this):s.btn&&e.on("click",s.btn,function(){return o.submit.call(this,e),!1})}),this};e.debounce=function(e,t){var n;return function(){var i=this,s=arguments;clearTimeout(n);n=setTimeout(function(){e.apply(i,s)},t)}};e.throttle=function(e,t){var n=0;return function(){var i=+new Date;if(i-n>t){e.apply(this,arguments);n=i}}};e.close=function(n){var i=e.get.className.open,s;var o=function(e){if(!e.hasClass("is-remove")){e.addClass("is-remove");setTimeout(function(){e.remove()},350)}};if(typeof n==="string"){s=i+"-"+n;o(t("."+s))}else if(typeof n==="number"){s=n?i+n:i;var a=n?i+"-shade"+n:i+"-shade";o(t("#"+a));o(t("#"+s))}else{o(t("."+i));o(t("."+i+"-shade"))}};e.open=function(n){var i={query:t,type:["dialog","msg","iframe","toptip","dropdown"],doms:[],index:e.get.genId(),className:e.get.className.open,tpl:e.tpl},s=i.query(window);i.config={type:n.type|0,content:n.content||"",shade:n.shadow,skin:n.skin||"",fixed:!!n.fixed,title:n.title,move:n.move,offset:n.offset||"auto",area:n.width||n.area||"auto",time:n.time,zIndex:20170513,full:n.full,close:n.close,success:typeof n.success==="function"?n.success:false,cancel:typeof n.cancel==="function"?n.cancel:false};i.setConfig=function(t){if(this.query("#"+i.className+i.index)[0])return;var s=this,o=0,a=i.config,r=["shade","title","close","content","hd","bd","btnfull"];for(o in r){i.doms[r[o]]=i.className+"-"+r[o]||""}if(a.type>4)return;if(typeof a.area==="string"){a.area=a.area==="auto"?["",""]:[a.area,""]}if(typeof c)var c=a.content,f=typeof a.content==="object";if(f)return;var l=function(e,t){return typeof e==="undefined"?t:e};switch(a.type){case 0:a.title=l(a.title,"信息");a.move=l(a.move,true);a.shade=l(a.shade,.3);break;case 1:s.close("msg");a.time=l(a.time,2);break;case 2:e.close();a.title=l(a.title,"窗体");a.move=l(a.move,true);a.shade=l(a.shade,.3);a.content=f?a.content:[a.content,"auto"];a.content='<iframe scrolling="'+(a.content[1]||"auto")+'" allowtransparency="true" onload="this.className=\'\';" class="" frameborder="0" src="'+a.content[0]+'"></iframe>';break;case 3:s.close("toptips");a.title=false;a.time=l(a.time,10);a.offset="t";break;case 4:if(!n.elem)return;a.close=false;s.close("dropdown");break}a.close=l(a.close,true);a.time=a.time|0;t&&t.call(this)};i.createElement=function(){var e=i;var t=e.config.title?i.tpl('<div class="{{d.doms.title}}">{{ d.config.title}}</div>',e):"";var n='<div class="'+e.doms.hd+(e.config.move?" is-move":"")+'" >'+t+(e.config.full?"<i class='"+e.doms.btnfull+"'>"+"</i>":"")+(e.config.close?"<i class='"+e.doms.close+"'>"+"</i>":"")+"</div>";var s='<div  class="'+e.doms.bd+'">'+e.config.content+"</div>";e.html=n+s;e.shade=e.className+"-shade"+e.index;var o=i.tpl('{{# if(d.config.shade){var color="#000",opacity=d.config.shade+";filter:alpha(opacity="+d.config.shade*100+")";}}<div class="{{d.doms.shade}}" id="{{d.shade}}" style="z-index:{{d.config.zIndex-1}}; background-color:{{color}};opacity:{{opacity}};"></div>{{# } }}{{# var type=d.type[d.config.type],classType=d.className+"-"+type,classBorder=(d.config.type==0||d.config.type==2)&&!d.config.shade?d.doms.border:"",classSkin=d.config.skin,classStyle="z-index:"+d.config.zIndex+";width:"+d.config.area[0]+";height:"+d.config.area[1]+(d.config.fixed?"":";position:absolute;");}}<div class="{{d.className}} {{classType}} {{classSkin}}" id="{{d.className+d.index}}" style="{{classStyle}}">{{d.html}}</div>',e);e=null;return o};i.auto=function(e){var t=this,n=t.config,o=t.that=t.query("#"+i.className+e);var a=[o.innerWidth(),o.innerHeight()];var r=o.find("."+i.doms.hd,o).outerHeight()||0;var c=o.find("."+i.doms.fd).outerHeight()||0;function f(e){e=o.find(e);e.height(a[1]-r-c-2*(parseFloat(e.css("padding"))|0))}switch(n.type){case 2:f("iframe");break;default:if(n.area[1]===""){if(n.fixed&&a[1]>=s.height()){a[1]=s.height();f("."+i.doms.bd)}}else{f("."+i.doms.bd)}break}return t};i.offset=function(){var e=this,t=e.config,i=e.that;var o=[i.outerWidth(),i.outerHeight()];var a=typeof t.offset==="object";e.offsetTop=(s.height()-o[1])/2;e.offsetLeft=(s.width()-o[0])/2;if(a){e.offsetTop=t.offset[0];e.offsetLeft=t.offset[1]||e.offsetLeft}else if(t.offset!=="auto"){if(t.offset==="t"){e.offsetTop=0}else if(t.offset==="r"){e.offsetLeft=s.width()-o[0]}else if(t.offset==="b"){e.offsetTop=s.height()-o[1]}else if(t.offset==="l"){e.offsetLeft=0}else if(t.offset==="lt"){e.offsetTop=0;e.offsetLeft=0}else if(t.offset==="lb"){e.offsetTop=s.height()-o[1];e.offsetLeft=0}else if(t.offset==="rt"){e.offsetTop=0;e.offsetLeft=s.width()-o[0]}else if(t.offset==="rb"){e.offsetTop=s.height()-o[1];e.offsetLeft=s.width()-o[0]}else{e.offsetTop=t.offset}}if(!t.fixed){e.offsetTop=/%$/.test(e.offsetTop)?s.height()*parseFloat(e.offsetTop)/100:parseFloat(e.offsetTop);e.offsetLeft=/%$/.test(e.offsetLeft)?s.width()*parseFloat(e.offsetLeft)/100:parseFloat(e.offsetLeft);e.offsetTop+=s.scrollTop();e.offsetLeft+=s.scrollLeft()}i.css({top:e.offsetTop,left:e.offsetLeft});if(t.type===4){var r=this.query(n.elem);t.area[0]||i.css({width:r.outerWidth()});var c=r.offset().left;var f=window.innerWidth;i.css({top:r.offset().top+r.outerHeight()+4,left:c<f/2?r.offset().left:r.offset().left+(r.outerWidth()-o[0])})}return e};i.move=function(){var t=e.util.drop;return this.config.move&&this.config.title&&t(this.that,"."+this.doms.title),this};i.append=function(e){this.query(document.body).append(i.createElement());e&&e.call(this)};i.callback=function(){var t=this.that,n=this.config,s=this.doms,o=this.index,a=this.query("body");if(n.success){if(n.type===2){t.find("iframe").on("load",function(){n.success.call(t.find("iframe").contents()[0],t,o)})}else{if(n.type===4){t.on("click",function(t){e.util.stop(t)});setTimeout(function(){a.on("click",function(){i.close(o)})},300)}n.success.call(t[0],t,o)}}var r=function(){return n.cancel?n.cancel(o,t):e.close(o)};t.find("."+s.close).on("click",r);t.find("."+s.btnfull).on("click",function(){var e="nui-open-full";if(t.hasClass(e)){t.removeClass(e);a.css({overflow:"visible"});i.auto(o)}else{t.addClass(e);a.css({overflow:"hidden"});i.auto(o)}});return this};i.close=function(t){var n=this.index;if(t){e.close(t)}else{if(i.config.time>0){setTimeout(function(){e.close(n)},i.config.time*1e3)}}return this};i.init=function(){var e=this.index;this.setConfig(function(){this.append(function(){this.auto(e).offset().move().callback().close()})});return e};return i.init()};e.alert=function(t,n){e.open({content:t,type:1,fixed:!0,time:n||2})};e.page=function(e,n){var i=t,s=function(){};s.prototype.success=function(e,t){return this.render(),e&&e(this.conf,t),this};s.prototype.view=function(){var e=this.conf,t=[],n={};e.pages=e.pages||1;e.curr=e.curr|0||1;e.groups="groups"in e?e.groups|0:5;e.first="first"in e?e.first:"首页";e.last="last"in e?e.last:"尾页";e.prev="prev"in e?e.prev:"上一页";e.next="next"in e?e.next:"下一页";if(e.groups>e.pages){e.groups=e.pages}n.index=Math.ceil((e.curr+(e.groups>1&&e.groups!==e.pages?1:0))/(e.groups===0?1:e.groups));if(e.curr>1&&e.prev){t.push('<a href="javascript:;" class="nui-page_prev" data-page="'+(e.curr-1)+'">'+e.prev+"</a>")}else{t.push("<cite>"+e.prev+"</cite>")}if(n.index>1&&e.first&&e.groups!==0){t.push('<a href="javascript:;" class="nui-page_first" data-page="1"">'+e.first+"</a><span>…</span>")}n.poor=Math.floor((e.groups-1)/2);n.start=n.index>1?e.curr-n.poor:1;n.end=n.index>1?function(){var t=e.curr+(e.groups-n.poor-1);return t>e.pages?e.pages:t}():e.groups;if(n.end-n.start<e.groups-1){n.start=n.end-e.groups+1}for(;n.start<=n.end;n.start++){if(n.start===e.curr){t.push('<span class="this" '+(/^#/.test(e.skin)?'style="background-color:'+e.skin+";border-color:"+e.skin+'"':"")+">"+n.start+"</span>")}else{t.push('<a href="javascript:;" data-page="'+n.start+'">'+n.start+"</a>")}}if(e.pages>e.groups&&n.end<e.pages&&e.last&&e.groups!==0){t.push('<span>…</span><a href="javascript:;" class="nui-page_last"  data-page="'+e.pages+'">'+e.last+"</a>")}n.flow=!e.prev&&e.groups===0;if(e.curr!==e.pages&&e.next||n.flow){t.push(function(){return n.flow&&e.curr===e.pages?'<span class="nui-page_next">'+e.next+"</span>":'<a href="javascript:;" class="nui-page_next" data-page="'+(e.curr+1)+'">'+e.next+"</a>"}())}else{t.push("<cite>"+e.next+"</cite>")}return'<div class="nui-pages">'+t.join("")+"</div>"};s.prototype.render=function(e){this.that.html(this.view(this.conf));e&&e.call(this)};s.prototype.event=function(){var e=this;e.that.on("click","[data-page]",function(){e.conf.curr=parseInt(this.getAttribute("data-page"))||1;e.success(n);e.that.trigger("nui(page)",e.conf)});return e};s.prototype.init=function(e){var t=this.conf=e||{};this.that=i(t.elem);delete t.elem;this.render(function(){this.event()});return this};return(new s).init(e).success(n,true)};e.date=function(){var n={query:t,date:e.util.date,isYear:function(e){return e%4===0&&e%100!==0||e%400===0},months:[31,null,31,30,31,30,31,31,30,31,30,31],className:{table:"nui-dropdown-date",curr:"_curr",toDay:"_today",next:"_next",prev:"_prev",_void:"_void",tools:"nui-dropdown-date__tools"}};n.table=function(){var e,t=[],i=["日","一","二","三","四","五","六"];var s={},o=document.createElement("table"),a=document.createElement("thead");a.appendChild(document.createElement("tr"));s.creath=function(e){var t=document.createElement("th");t.innerHTML=i[e];a.getElementsByTagName("tr")[0].appendChild(t);t=null};for(var r=0,c=6;r<c;r++){t.push([]);e=o.insertRow(0);for(var f=0,l=7;f<l;f++){t[r][f]=0;r===0&&s.creath(f);e.insertCell(f)}}o.insertBefore(a,o.children[0]);o.className=n.className.table;e=t=null;return o.outerHTML.toLowerCase()}();n.checkVoid=function(e,t,n,i){var s=[];e=e|0;t=t|0;n=n|0;if(e<i.min[0]){s=["y"]}else if(e>i.max[0]){s=["y",1]}else if(e>=i.min[0]&&e<=i.max[0]){if(e==i.min[0]){if(t<i.min[1]){s=["m"]}else if(t==i.min[1]){if(n<i.min[2]){s=["d"]}}}if(e==i.max[0]){if(t>i.max[1]){s=["m",1]}else if(t==i.max[1]){if(n>i.max[2]){s=["d",1]}}}}return s};n.viewDate=function(e,t,i,s){var o={},a=new Date;o.today=a.getDate();a.setFullYear(e,t,i);o.ymd=[a.getFullYear(),a.getMonth(),o.today];n.months[1]=n.isYear(o.ymd[0])?29:28;a.setFullYear(o.ymd[0],o.ymd[1],1);o.FDay=a.getDay();o.PDay=n.months[t===0?11:t-1]-o.FDay+1;o.NDay=1;var r=function(e,t){this.innerHTML=e;t&&(this.className=t)};n.query("td",this).each(function(e){var t=o.ymd[0],i=o.ymd[1]+1,a;if(e<o.FDay){a=e+o.PDay;r.call(this,a,n.className.prev);i===1&&(t-=1);i=i===1?12:i-1}else if(e>=o.FDay&&e<o.FDay+n.months[o.ymd[1]]){a=e-o.FDay+1;r.call(this,a);if(e-o.FDay+1===o.ymd[2]){o.thisDay=this}}else{a=o.NDay++;r.call(this,a,n.className.next);i===12&&(t+=1);i=i===12?1:i+1}o.today===a&&(this.className+=" "+n.className.toDay);if(s&&n.checkVoid(t,i,a,s)[0])this.className+=" "+n.className._void;this.setAttribute("y",t);this.setAttribute("m",i);this.setAttribute("d",a)})};return function(t,i){var s=n.query(t.elem);var o="input"===s[0].tagName.toLowerCase()?"focus":"click";s.on(o,function(){var o=e.get.check.date(t.min);var a=e.get.check.date(t.max);if(o){t.min=n.date.now()}if(a){t.max="2099-12-31"}var r=t.min.split("-");e.open({content:n.table,title:"<span><i></i><cite>"+r[0]+"</cite><em></em></span>"+"<span><i></i><cite>"+r[1]+"</cite><em></em></span>",type:4,time:0,width:"240px",elem:s,success:function(o,a){var c=this;var f=n.query("."+e.get.className.open+"-hd",c);f.addClass(n.className.tools);var l=n.query("."+e.get.className.open+"-bd",c);var u={min:t.min.split("-"),max:t.max.split("-")};var d=function(e,i,s){l.html(n.table);n.viewDate.call(c,e,--i,s,t.max!=="2099-12-31"?u:void 0)};n.query("span",f).each(function(){var e=n.query(this),i=n.query("i",this),s=n.query("cite",this),o=n.query("em",this),a=e.index(),c=parseInt(s.html());var f=function(e){c+=e;if(a){c>12&&(c=12);c<1&&(c=1);r[1]=c}else{if(t.max!=="2099-12-31"){var i=parseInt(u.min[0]);c<i&&(c=i)}r[0]=c}s.html(n.date.n2s(c));d.apply(null,r)};e.on("click","i",function(){f(-1)}).on("click","em",function(){f(+1)})});d.apply(null,r);n.query(this).on("click","td",function(){if(this.className.indexOf(n.className.next)!==-1||this.className.indexOf(n.className.prev)!==-1||this.className.indexOf(n.className._void)!==-1){}else{var o=n.date.format(new Date(this.getAttribute("y"),parseInt(this.getAttribute("m"))-1,this.getAttribute("d")),t.format);s.val(o);i&&i({min:t.min,max:t.max,format:t.format,curr:o});e.close(a)}})}})})}}();e.tab=function(){var e=t,n="#!",i=location.hash.split(n)[1],s=document.getElementById(i);if(s){var o=s.className.split(" ");e("[data-tab]").each(function(){var t=e(this),n=t.attr("data-tab");for(var s in o){if(o[s].indexOf(n)){n=n.split("|");if(n[3]){e(n[3],e(n[2])).each(function(s){if(this.id===i){e(n[0],t).eq(s).addClass(n[1]).siblings().removeClass(n[1]);e(this).show().siblings(n[3]).hide()}})}break}}})}return function(){var t=e(this),i=t.attr("data-tab").split("|");typeof i===typeof[]||(i=["a","this"]);e(i[0],t).on("click",function(){var s=e(this),o=s.index(),a=i[3];s.addClass(i[1]).siblings().removeClass(i[1]);a&&e(a,i[2]).eq(o).show().each(function(){if(this.id)location.hash=n+this.id}).siblings(a).hide();t.trigger("nui(tab)",{el:s,tab:e(a,i[2]),index:o})})}}();e.animate=function(e,t,n,i,s){if(typeof e==="number"&&typeof t==="number"&&typeof n==="function"){if(!window.requestAnimationFrame){requestAnimationFrame=function(e){setTimeout(e,17)}}typeof s==="number"||(s=1e3);var o={Linear:function(e,t,n,i){return n*e/i+t},easeIn:function(e,t,n,i){return n*(e/=i)*e+t},easeOut:function(e,t,n,i){return-n*(e/=i)*(e-2)+t},easeInOut:function(e,t,n,i){if((e/=i/2)<1)return n/2*e*e+t;return-n/2*(--e*(e-2)-1)+t}};var a=0;var r=Math.ceil(s/17);var c=i in o?o[i]:o.Linear;var f=function(){var i=c(a,e,t-e,r);a++;if(a<=r){n(i);requestAnimationFrame(f)}else{n(t,true)}};f()}};e.anchor=function(){var n,i,s,o=this.getAttribute("data-anchor");return n=t(o),i=n.length?n.offset().top-80:0,s=i/9>300?i/9:300,e.animate(document.body.scrollTop,i,function(e){document.body.scrollTop=e},"easeOut",600),!1};e.renderData=function(n,i,s){i=i||document.body;s=(s||"data")+"-"+n;switch(n){case"tab":case"anchor":t("["+s+"]",i).each(function(){e[n].call(this)});break;case"date":t("["+s+"]",i).each(function(){e.date({elem:this,min:this.getAttribute(s)})});break}return e};e.renderData("tab").renderData("anchor").renderData("date");e.form({form:".nui-form"});return e};"function"===typeof define?define(function(t){var n=t("jquery");return e.init(n)}):window.nui=e.init($)})();