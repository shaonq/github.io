(function(){"use strict";var t={v:"0.1.6"};t.log=window.console?function(t,e,n){location.hostname==="localhost"&&t&&"error"===e&&(n="red"),"success"===e&&(n="green"),console.log("%c"+(e||"info")+" ","color:"+(n||"blue")+";",t)}:function(){window.console={log:function(){}}}();t.loadJs=function(t,e){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.onload=i.onreadystatechange=i.onerror=function(){i&&i.readyState&&/^(?!(?:loaded|complete)$)/.test(i.readyState)||(i.onload=i.onreadystatechange=i.onerror=null,i.src="",i.parentNode.removeChild(i),i=null,e&&e())},i.src=t;try{n.appendChild(i)}catch(s){}};t.loadCss=function(t,e){var n=document.getElementsByTagName("head")[0],i=document.createElement("link"),s=document.getElementById(e);i.onload=i.onreadystatechange=i.onerror=null,i.rel="stylesheet",i.href=t;try{s?i=null:(e&&(i.id=e),n.appendChild(i))}catch(r){}};t.init=function(e){t.is=function(){var t={},e=navigator.userAgent;return t.ios=!!e.match(/(iphone|ipod|ipad)/i),t.android=!!e.match(/android/i),t.wechat=!!e.match(/micromessenger/i),e=e.match(/msie \d+?/i),t.ie=function(){var t=navigator.userAgent.toLowerCase();return window.ActiveXObject||"ActiveXObject"in window?(t.match(/msie\s(\d+)/)||[])[1]||"11":!1}(),t}();t.get={param:function(t){var e=new RegExp("(\\?|#|&)"+t+"=([^&#]*)(&|#|$)"),n=location.href.match(e);return decodeURIComponent(!n?"":n[2])},redirect:function(t){var e="?"+(t||"redirect")+"=",n=location.href.split(e);var i=!n?"":n[1].match(/http:\/\/([^\/]*)\/?/i)||[];return decodeURIComponent(i)},index:0,path:function(){var t=document.scripts,e=t[t.length-1],n=e.src;return n.substring(0,n.lastIndexOf("/")+1)}(),genId:function(t){return(t||0)+ ++this.index},className:{open:"nui-open"},check:{phone:function(t){return/^1\d{10}$/g.test(t)?void 0:"手机格式不合法"},pass:function(t){return/[a-z0-9]{6,}/g.test(t)?void 0:"密码太过简单"},repass:function(t,e){return e===t?void 0:"两次密码不一致"},email:function(t){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)?void 0:"邮箱格式不正确"},url:function(t){return/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/.test(t)?void 0:"链接格式不正确"},date:function(t){return/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/.test(t)?void 0:"日期格式不正确"},number:function(t){return/^\d+$/.test(t)?void 0:"只能填写数字"},identity:function(t){return/(^\d{15}$)|(^\d{17}(x|X|\d)$)/.test(t)?void 0:"请输入正确的身份证号"},checked:function(t){return this.checked?void 0:t||""},required:function(t,e){return""!==t.replace(/\s/g,"")?void 0:e||"此项不能为空"}}};t.util={stop:function(t){t=t||window.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},randomSize:function(t,e,n){return t=t||0,e=e||10,(t+Math.random()*(e-t)).toFixed(n||0)},drop:function(t,n){var i=e(document),s=e(window),r=t,a=r.find(n),o={};a.on("mousedown",function(t){t.preventDefault(),o.start=!0,o.offset=[t.clientX-parseFloat(r.css("left")),t.clientY-parseFloat(r.css("top"))]}),i.on("mousemove",function(t){if(o.start){var e=t.clientX-o.offset[0],n=t.clientY-o.offset[1],i="fixed"===r.css("position");t.preventDefault(),o.stX=i?0:s.scrollLeft(),o.stY=i?0:s.scrollTop();var a=s.width()-r.outerWidth()+o.stX,c=s.height()-r.outerHeight()+o.stY;e<o.stX&&(e=o.stX),e>a&&(e=a),n<o.stY&&(n=o.stY),n>c&&(n=c),r.css({left:e,top:n})}}).on("mouseup",function(){o.start&&(o.start=null)})},date:{n2s:function(t){return 10>t?"0"+(t|0):t},format:function(t,e){var n;typeof t==="number"&&(t=new Date(t));n=t.getFullYear();var i=this.n2s(t.getMonth()+1),s=this.n2s(t.getDate()),r=this.n2s(t.getHours()),a=this.n2s(t.getMinutes()),o=this.n2s(t.getSeconds());switch(e){case"yyyy-MM-dd HH:mm:ss":n=n+"-"+i+"-"+s+" "+r+":"+a+":"+o;break;case"yyyy-MM":n=n+"-"+i;break;case"yyyy":break;default:n=n+"-"+i+"-"+s}return n},toDate:function(t){var e,n,i,s,r,a;if(19==t.length)return e=t.substring(0,4),n=t.substring(5,7),i=t.substring(8,10),s=t.substring(11,13),r=t.substring(14,16),a=t.substring(17,19),new Date(e,n-1,i,s,r,a);if(10==t.length)return e=t.substring(0,4),n=t.substring(5,7),i=t.substring(8,10),new Date(e,n-1,i);if(7==t.length)return e=t.substring(0,4),n=t.substring(5,7),new Date(e,n-1);if(4==t.length)return e=t.substring(0,4),new Date(e)},countDown:function(t){var e=(this.toDate(t)-this.toDate(this.now("yyyy-MM-dd HH:mm:ss")))/1e3,n,i;0<e?(t=Math.floor(e/86400),n=Math.floor(e/3600)-24*t,i=Math.floor(e/60)-60*n-1440*t,e=Math.floor(e%60)):t=n=i=e=0;return{dd:this.n2s(t),d:t,HH:this.n2s(n),H:n,mm:this.n2s(i),m:i,ss:this.n2s(e),s:e}},now:function(t,e){typeof t==="string"&&(e=t);var n=Date,i;t|0?(i=parseInt(t),i=864e5>i?+new Date+864e5*i:i):i=+new Date;n=new n(i);return e?this.format(n,e):this.format(n)},history:function(t,e){"string"===typeof t&&(t=this.toDate(t));var n=(new Date).getTime()-t;return 2592e6<n?this.format(t,e):864e5<=n?(n/1e3/60/60/24|0)+"天前":36e5<=n?(n/1e3/60/60|0)+"小时前":3e5<=n?(n/1e3/60|0)+"分钟前":"刚刚"}}};t.http=function(n,i,s,r){t.log(n,"http-url");"function"===typeof i?(r=s,s=i):t.log(i,"http-data");r=r||{};i=i||{};var a={};var o=a.http||{};return e.ajax({type:r.type||"post",dataType:r.dataType||"json",data:i,url:n,timeout:r.timeout||1e4,success:function(e){o.success?o.success(e,s):(s&&s(e),!r.dataType&&t.log(e,"http-success"))},error:function(e){o.error?o.error(e):r.error?r.error(e):t.log("请求异常，请重试","http-error","red")}})};t.cookie=function(t,n,i){t=t||"";var s,r,a;if("undefined"==typeof n){if(n=null,document.cookie&&""!=document.cookie)for(i=document.cookie.split(";"),r=0;r<i.length;r++)if(s=e.trim(i[r]),s.substring(0,t.length+1)==t+"="){n=decodeURIComponent(s.substring(t.length+1));break}return n}i=i||{};null===n&&(n="",i.expires=-1);s="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(r=new Date,r.setTime(r.getTime()+864e5*i.expires)):r=i.expires,s="; expires="+r.toUTCString());r=i.path?"; path="+i.path:"";a=i.domain?"; domain="+i.domain:"";i=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(n),s,r,a,i].join("")};t.store=function(t,e){return window.localStorage&&typeof JSON?function(){if(typeof t==="string"){if(typeof e==="undefined"){e=window.localStorage.getItem(t);return JSON.parse(e)||e}else{e=typeof e==="object"?JSON.stringify(e):e;return window.localStorage.setItem(t,e)}}else{return window.localStorage.clear()}}():void 0};t.tpl=function(t,e,n){var i={open:"{{",close:"}}"},s={exp:function(t){return new RegExp(t,"g")},query:function(t,e,n){return r((e||"")+i.open+["#([\\s\\S])+?","([^{#}])*?"][t||0]+i.close+(n||""))},escape:function(t){return String(t||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(t,e){return"object"==typeof console&&console.error("tpl Error："+t+"\n"+(e||"")),"tpl Error："+t}},r=s.exp,a=function(t){this.tpl=t};a.pt=a.prototype,window.errors=0,a.pt.parse=function(t,e){var n=t,a=r("^"+i.open+"#",""),o=r(i.close+"$","");t=t.replace(/\s+|\r|\t|\n/g," ").replace(r(i.open+"#"),i.open+"# ").replace(r(i.close+"}"),"} "+i.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(s.query(),function(t){return t=t.replace(a,"").replace(o,""),'";'+t.replace(/\\/g,"")+';view+="'}).replace(s.query(1),function(t){var e='"+(';return t.replace(/\s/g,"")===i.open+i.close?"":(t=t.replace(r(i.open+"|"+i.close),""),/^=/.test(t)&&(t=t.replace(/^=/,""),e='"+_escape_('),e+t.replace(/\\/g,"")+')+"')}),t='"use strict";var view = "'+t+'";return view;';try{return this.cache=t=new Function("d, _escape_",t),t(e,s.escape)}catch(c){return delete this.cache,s.error(c,n)}},a.pt.render=function(t,e){var n;return t?(n=this.cache?this.cache(t,s.escape):this.parse(this.tpl,t),e?void e(n):n):s.error("no data")};var o=function(t){return"string"!=typeof t?s.error("Template not found"):new a(t)};return o.config=function(t){t=t||{};for(var e in t)i[e]=t[e]},n?(o(t).render(e,n),this):o(t).render(e)};t.upload=function(t,n){if(typeof t!=="object"){return}t.elem&&(t.trigger=t.elem);var i=0;var s=function(t){if(!(this instanceof s)){return new s(t)}if(r(t)){t={trigger:t}}var n={trigger:null,name:null,action:null,data:null,accept:null,change:null,error:null,multiple:false,success:null};if(t){e.extend(n,t)}var i=e(n.trigger);n.action=n.action||i.data("action")||"/upload";n.name=n.name||i.attr("name")||i.data("name")||"file";n.data=n.data||o(i.data("data"));n.accept=n.accept||i.data("accept");n.success=n.success||i.data("success");this.settings=n;this.setup();this.bind()};s.prototype.setup=function(){this.form=e('<form method="post" enctype="multipart/form-data"target="" action="'+this.settings.action+'" />');this.iframe=f();this.form.attr("target",this.iframe.attr("name"));var t=this.settings.data;this.form.append(a(t));if(window.FormData){this.form.append(a({_uploader_:"formdata"}))}else{this.form.append(a({_uploader_:"iframe"}))}var n=document.createElement("input");n.type="file";n.name=this.settings.name;if(this.settings.accept){n.accept=this.settings.accept}if(this.settings.multiple){n.multiple=true;n.setAttribute("multiple","multiple")}this.input=e(n);var i=e(this.settings.trigger);this.input.attr("hidefocus",true).css({position:"absolute",top:0,right:0,opacity:0,outline:0,cursor:"pointer",height:i.outerHeight(),fontSize:Math.max(64,i.outerHeight()*5)});this.form.append(this.input);this.form.css({position:"absolute",top:i.offset().top,left:i.offset().left,overflow:"hidden",width:i.outerWidth(),height:i.outerHeight(),zIndex:c(i)+10}).appendTo("body");return this};s.prototype.bind=function(){var t=this;var n=e(t.settings.trigger);n.mouseenter(function(){t.form.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(),height:n.outerHeight()})});t.bindInput()};s.prototype.bindInput=function(){var t=this;t.input.change(function(e){t._files=this.files||[{name:e.target.value}];var n=t.input.val();if(t.settings.change){t.settings.change.call(t,t._files)}else{if(n){return t.submit()}}})};s.prototype.submit=function(){var t=this;if(window.FormData&&t._files){var n=new FormData(t.form.get(0));n.append(t.settings.name,t._files);var i;if(t.settings.progress){var s=t._files;i=function(){var n=e.ajaxSettings.xhr();if(n.upload){n.upload.addEventListener("progress",function(e){var n=0;var i=e.loaded||e.position;var r=e.total;if(e.lengthComputable){n=Math.ceil(i/r*100)}t.settings.progress(e,i,r,n,s)},false)}return n}}e.ajax({url:t.settings.action,type:"post",processData:false,contentType:false,data:n,xhr:i,context:this,success:t.settings.success,error:t.settings.error});return this}else{t.iframe=f();t.form.attr("target",t.iframe.attr("name"));e("body").append(t.iframe);t.iframe.one("load",function(){e('<iframe src="javascript:false;"></iframe>').appendTo(t.form).remove();var n;try{n=e(this).contents().find("body").html()}catch(i){n="cross-domain"}e(this).remove();if(!n){if(t.settings.error){t.settings.error(t.input.val())}}else{if(t.settings.success){t.settings.success(n)}}});t.form.submit()}return this};s.prototype.refreshInput=function(){var t=this.input.clone();this.input.before(t);this.input.off("change");this.input.remove();this.input=t;this.bindInput()};s.prototype.change=function(t){if(!t){return this}this.settings.change=t;return this};s.prototype.success=function(t){var e=this;this.settings.success=function(n){e.refreshInput();if(t){t(n)}};return this};s.prototype.error=function(t){var e=this;this.settings.error=function(n){if(t){e.refreshInput();t(n)}};return this};s.prototype.enable=function(){this.input.prop("disabled",false);this.input.css("cursor","pointer")};s.prototype.disable=function(){this.input.prop("disabled",true);this.input.css("cursor","not-allowed")};function r(t){return Object.prototype.toString.call(t)==="[object String]"}function a(t){if(!t){return[]}var e=[],n;for(var i in t){n=document.createElement("input");n.type="hidden";n.name=i;n.value=t[i];e.push(n)}return e}function o(t){if(!t){return{}}var e={};var n=t.split("&");var i=function(t){return decodeURIComponent(t.replace(/\+/g," "))};for(var s=0;s<n.length;s++){var r=n[s].split("=");var a=i(r[0]);var o=i(r[1]);e[a]=o}return e}function c(t){var e=t.parentsUntil("body");var n=0;for(var i=0;i<e.length;i++){var s=e.eq(i);if(s.css("position")!=="static"){n=parseInt(s.css("zIndex"),10)||n}}return n}function f(){var t="iframe-uploader-"+i;var n=e('<iframe name="'+t+'" />').hide();i+=1;return n}var u=function(t){if(!(this instanceof u)){return new u(t)}if(r(t)){t={trigger:t}}var n=e(t.trigger);var i=[];n.each(function(e,n){t.trigger=n;i.push(new s(t))});this._uploaders=i};u.prototype.submit=function(){e.each(this._uploaders,function(t,e){e.submit()});return this};u.prototype.change=function(t){e.each(this._uploaders,function(e,n){n.change(t)});return this};u.prototype.success=function(t){e.each(this._uploaders,function(e,n){n.success(t)});return this};u.prototype.error=function(t){e.each(this._uploaders,function(e,n){n.error(t)});return this};u.prototype.enable=function(){e.each(this._uploaders,function(t,e){e.enable()});return this};u.prototype.disable=function(){e.each(this._uploaders,function(t,e){e.disable()});return this};u.Uploader=s;return new u(t).success(n)};t.form=function(n,i){typeof n==="function"?(i=n,n={}):n=n||{};var s={},r={check:t.get.check,times:0,submit:function(i){var s=i.find("[name]"),a={},o=!0,c="";return s.each(function(){try{var i=e(this),s=i.attr("data-check")||i.attr("check"),f=i.attr("name"),u=i.val(),l;if(s){switch(n.check&&typeof n.check[s]||typeof r.check[s]){case"function":switch(s){case"pass":c=i.val();l=r.check[s](u);break;case"repass":l=r.check[s](u,c);break;case"checked":var d=this.getAttribute("title");d&&(l=r.check.checked.call(this,d));break;default:l=r.check[s](u);break}break;default:l=r.check.required(u,s);break}if(l)return o=!1,i.focus(),typeof n.message==="function"?n.message.call(this,f,i):t.alert(l),o}if(!r.check.required(u)&&f){var p=this.tagName.toLowerCase(),h=this.type;if(h==="radio"){this.checked&&(a[f]=u)}else if(h==="checkbox"){a[f]=a[f]||[],this.checked&&a[f].push(u)}else a[f]=u}}catch(m){t.log(m,"error")}}),o&&r.action.call(this,a),!1},action:function(s){var r=e(this),a=r.attr("action")||n.url;a?t.http(a,s||{},i):t.log("data-form,no url !","error")}},a={checkbox:function(t){var n=this,i=t||"checkbox",s=e(n).find("input[type="+i+"]");return s.each(function(){var t=e(this),n={id:t.attr("id")||"",css:"nui-form-"+(this.getAttribute("role")||i)+"-label",checked:function(t){i!=="radio"?this.checked?t.addClass("checked"):t.removeClass("checked"):s.each(function(){var t=e(this),i=t.next("."+n.css);this.checked?i.addClass("checked"):i.removeClass("checked")})},event:function(t,e,i){var s=this;t.on("click",function(){i||(s.checked=!s.checked),e.trigger("change")}),e.on("change",function(){n.checked.call(s,t)})}};t.css({position:"absolute",clip:"rect(0,0,0,0)"}),t.after(e("<label class="+n.css+' for="'+n.id+'"></label>')),n.label=t.next("."+n.css),n.checked.call(this,n.label),n.event.call(this,n.label,t,n.id);t.attr("disabled")&&t.next().addClass("is-disabled")})},select:function(){var t,n=e("select",this),i=".nui-form-select-text",s=".nui-form-select-list",r="nui-form-select";return t=function(t,n){var a=e(i,t);a.on("click",function(n){var i=e(s,t),a=e(s,"."+r);n.stopPropagation(),function(t){a.hide().parent().removeClass(t),i.show().parent().addClass(t)}(r+"ed"),function(t){e(document).one("click",function(){i.hide().parent().removeClass(t)})}(r+"ed")}),t.find("a").on("click",function(){var t=e(this),i=t.attr("data-value");t.addClass("this").siblings().removeClass("this");a.find("span").html(t.html()),n.val(i).trigger("change")})},n.each(function(){var n=e(this),i=n.val(),r=this.selectedIndex,a=e(this.options[r]),o=e(function(){for(var t='<div class="nui-form-select-list"><div class="nui-dropdown">',e=n.find("option"),i=0;i<e.length;i++)t+='<a class="nui-dropdown-item" data-value="'+e.eq(i).val()+'">'+(e.eq(i).html()||e.eq(i).val())+"</a>";return t+"</div></div>"}()),c=e('<div class="nui-form-select"><div class="nui-form-select-text nui-input"><span>'+(a.html()||i)+"</span><i></i></div>"+o.prop("outerHTML")+"</div>");c.find(s).find("a").eq(r).addClass("this"),n.hide(),n.after(c),t(n.next(),n)}),this}};return s.form=n.form,s.btn=n.btn,n.form&&e(s.form).each(function(){var t=e(this);e("[data-form]",this)[0]||this.getAttribute("data-form")||(a.checkbox.call(this),a.checkbox.call(this,"radio"),a.select.call(this),this.setAttribute("data-form",!0));typeof i==="function"&&"form"===this.tagName.toLowerCase()?function(n){s.btn&&e(s.btn,t).on("click",function(){return"a"===n.tagName.toLowerCase()&&t.trigger("submit"),!1});t.off("submit").on("submit",function(){return r.submit.call(this,t),!1})}(this):s.btn&&t.on("click",s.btn,function(){return r.submit.call(this,t),!1})}),this};t.close=function(n){var i=t.get.className.open,s;var r=function(t){if(!t.hasClass("is-remove")){t.addClass("is-remove");setTimeout(function(){t.remove()},350)}};if(typeof n==="string"){s=i+"-"+n;r(e("."+s))}else if(typeof n==="number"){s=n?i+n:i;var a=n?i+"-shade"+n:i+"-shade";r(e("#"+a));r(e("#"+s))}else{r(e("."+i));r(e("."+i+"-shade"))}};t.open=function(n){var i={query:e,type:["dialog","msg","iframe","toptip","dropdown"],doms:[],index:t.get.genId(),className:t.get.className.open,tpl:t.tpl},s=i.query(window);i.config={type:n.type|0,content:n.content||"",shade:n.shadow,skin:n.skin||"",fixed:!!n.fixed,title:n.title,move:n.move,offset:n.offset||"auto",area:n.width||n.area||"auto",time:n.time,zIndex:20170513,full:n.full,close:n.close,success:typeof n.success==="function"?n.success:false,cancel:typeof n.cancel==="function"?n.cancel:false};i.setConfig=function(e){if(this.query("#"+i.className+i.index)[0])return;var s=this,r=0,a=i.config,o=["shade","title","close","content","hd","bd","btnfull"];for(r in o){i.doms[o[r]]=i.className+"-"+o[r]||""}if(a.type>4)return;if(typeof a.area==="string"){a.area=a.area==="auto"?["",""]:[a.area,""]}if(typeof c)var c=a.content,f=typeof a.content==="object";if(f)return;var u=function(t,e){return typeof t==="undefined"?e:t};switch(a.type){case 0:a.title=u(a.title,"信息");a.move=u(a.move,true);a.shade=u(a.shade,.3);break;case 1:s.close("msg");a.time=u(a.time,2);break;case 2:t.close();a.title=u(a.title,"窗体");a.move=u(a.move,true);a.shade=u(a.shade,.3);a.content=f?a.content:[a.content,"auto"];a.content='<iframe scrolling="'+(a.content[1]||"auto")+'" allowtransparency="true" onload="this.className=\'\';" class="" frameborder="0" src="'+a.content[0]+'"></iframe>';break;case 3:s.close("toptips");a.title=false;a.time=u(a.time,10);a.offset="t";break;case 4:if(!n.elem)return;s.close("dropdown");break}a.close=u(a.close,true);a.time=a.time|0;e&&e.call(this)};i.createElement=function(){var t=i;var e=t.config.title?i.tpl('<div class="{{d.doms.title}}">{{ d.config.title}}</div>',t):"";var n='<div class="'+t.doms.hd+(t.config.move?" is-move":"")+'" >'+e+(t.config.full?"<i class='"+t.doms.btnfull+"'>"+"</i>":"")+(t.config.close?"<i class='"+t.doms.close+"'>"+"</i>":"")+"</div>";var s='<div  class="'+t.doms.bd+'">'+t.config.content+"</div>";t.html=n+s;t.shade=t.className+"-shade"+t.index;var r=i.tpl('{{# if(d.config.shade){var color="#000",opacity=d.config.shade+";filter:alpha(opacity="+d.config.shade*100+")";}}<div class="{{d.doms.shade}}" id="{{d.shade}}" style="z-index:{{d.config.zIndex-1}}; background-color:{{color}};opacity:{{opacity}};"></div>{{# } }}{{# var type=d.type[d.config.type],classType=d.className+"-"+type,classBorder=(d.config.type==0||d.config.type==2)&&!d.config.shade?d.doms.border:"",classSkin=d.config.skin,classStyle="z-index:"+d.config.zIndex+";width:"+d.config.area[0]+";height:"+d.config.area[1]+(d.config.fixed?"":";position:absolute;");}}<div class="{{d.className}} {{classType}} {{classSkin}}" id="{{d.className+d.index}}" style="{{classStyle}}">{{d.html}}</div>',t);t=null;return r};i.auto=function(t){var e=this,n=e.config,r=e.that=e.query("#"+i.className+t);var a=[r.innerWidth(),r.innerHeight()];var o=r.find("."+i.doms.hd,r).outerHeight()||0;var c=r.find("."+i.doms.fd).outerHeight()||0;function f(t){t=r.find(t);t.height(a[1]-o-c-2*(parseFloat(t.css("padding"))|0))}switch(n.type){case 2:f("iframe");break;default:if(n.area[1]===""){if(n.fixed&&a[1]>=s.height()){a[1]=s.height();f("."+i.doms.bd)}}else{f("."+i.doms.bd)}break}return e};i.offset=function(){var t=this,e=t.config,i=t.that;var r=[i.outerWidth(),i.outerHeight()];var a=typeof e.offset==="object";t.offsetTop=(s.height()-r[1])/2;t.offsetLeft=(s.width()-r[0])/2;if(a){t.offsetTop=e.offset[0];t.offsetLeft=e.offset[1]||t.offsetLeft}else if(e.offset!=="auto"){if(e.offset==="t"){t.offsetTop=0}else if(e.offset==="r"){t.offsetLeft=s.width()-r[0]}else if(e.offset==="b"){t.offsetTop=s.height()-r[1]}else if(e.offset==="l"){t.offsetLeft=0}else if(e.offset==="lt"){t.offsetTop=0;t.offsetLeft=0}else if(e.offset==="lb"){t.offsetTop=s.height()-r[1];t.offsetLeft=0}else if(e.offset==="rt"){t.offsetTop=0;t.offsetLeft=s.width()-r[0]}else if(e.offset==="rb"){t.offsetTop=s.height()-r[1];t.offsetLeft=s.width()-r[0]}else{t.offsetTop=e.offset}}if(!e.fixed){t.offsetTop=/%$/.test(t.offsetTop)?s.height()*parseFloat(t.offsetTop)/100:parseFloat(t.offsetTop);t.offsetLeft=/%$/.test(t.offsetLeft)?s.width()*parseFloat(t.offsetLeft)/100:parseFloat(t.offsetLeft);t.offsetTop+=s.scrollTop();t.offsetLeft+=s.scrollLeft()}i.css({top:t.offsetTop,left:t.offsetLeft});if(e.type===4){var o=this.query(n.elem);e.area[0]||i.css({width:o.outerWidth()});var c=o.offset().left;var f=window.innerWidth;i.css({top:o.offset().top+o.outerHeight()+4,left:c<f/2?o.offset().left:o.offset().left+(o.outerWidth()-r[0])})}return t};i.move=function(){var e=t.util.drop;return this.config.move&&this.config.title&&e(this.that,"."+this.doms.title),this};i.append=function(t){this.query(document.body).append(i.createElement());t&&t.call(this)};i.callback=function(){var e=this.that,n=this.config,s=this.doms,r=this.index,a=this.query("body");if(n.success){if(n.type==2){e.find("iframe").on("load",function(){n.success.call(e.find("iframe").contents()[0],e,r)})}else{n.success.call(e[0],e,r)}}var o=function(){return n.cancel?n.cancel(r,e):t.close(r)};e.find("."+s.close).on("click",o);e.find("."+s.btnfull).on("click",function(){var t="nui-open-full";if(e.hasClass(t)){e.removeClass(t);a.css({overflow:"visible"});i.auto(r)}else{e.addClass(t);a.css({overflow:"hidden"});i.auto(r)}});return this};i.close=function(e){var n=this.index;if(e){t.close(e)}else{if(i.config.time>0){setTimeout(function(){t.close(n)},i.config.time*1e3)}}return this};i.init=function(){var t=this.index;this.setConfig(function(){this.append(function(){this.auto(t).offset().move().callback().close()})});return t};return i.init()};t.alert=function(t,e){nui.open({content:t,type:1,fixed:!0,time:e||2})};t.page=function(t,n){var i=e,s=function(){};s.prototype.success=function(t,e){return this.render(),t&&t(this.conf,e),this};s.prototype.view=function(){var t=this.conf,e=[],n={};t.pages=t.pages||1;t.curr=t.curr|0||1;t.groups="groups"in t?t.groups|0:5;t.first="first"in t?t.first:"首页";t.last="last"in t?t.last:"尾页";t.prev="prev"in t?t.prev:"上一页";t.next="next"in t?t.next:"下一页";if(t.groups>t.pages){t.groups=t.pages}n.index=Math.ceil((t.curr+(t.groups>1&&t.groups!==t.pages?1:0))/(t.groups===0?1:t.groups));if(t.curr>1&&t.prev){e.push('<a href="javascript:;" class="nui-page_prev" data-page="'+(t.curr-1)+'">'+t.prev+"</a>")}else{e.push("<cite>"+t.prev+"</cite>")}if(n.index>1&&t.first&&t.groups!==0){e.push('<a href="javascript:;" class="nui-page_first" data-page="1"">'+t.first+"</a><span>…</span>")}n.poor=Math.floor((t.groups-1)/2);n.start=n.index>1?t.curr-n.poor:1;n.end=n.index>1?function(){var e=t.curr+(t.groups-n.poor-1);return e>t.pages?t.pages:e}():t.groups;if(n.end-n.start<t.groups-1){n.start=n.end-t.groups+1}for(;n.start<=n.end;n.start++){if(n.start===t.curr){e.push('<span class="this" '+(/^#/.test(t.skin)?'style="background-color:'+t.skin+";border-color:"+t.skin+'"':"")+">"+n.start+"</span>")}else{e.push('<a href="javascript:;" data-page="'+n.start+'">'+n.start+"</a>")}}if(t.pages>t.groups&&n.end<t.pages&&t.last&&t.groups!==0){e.push('<span>…</span><a href="javascript:;" class="nui-page_last"  data-page="'+t.pages+'">'+t.last+"</a>")}n.flow=!t.prev&&t.groups===0;if(t.curr!==t.pages&&t.next||n.flow){e.push(function(){return n.flow&&t.curr===t.pages?'<span class="nui-page_next">'+t.next+"</span>":'<a href="javascript:;" class="nui-page_next" data-page="'+(t.curr+1)+'">'+t.next+"</a>"}())}else{e.push("<cite>"+t.next+"</cite>")}return'<div class="nui-pages">'+e.join("")+"</div>"};s.prototype.render=function(t){this.that.html(this.view(this.conf));t&&t.call(this)};s.prototype.event=function(){var t=this;t.that.on("click","[data-page]",function(){t.conf.curr=parseInt(this.getAttribute("data-page"))||1;t.success(n);t.that.trigger("nui(page)",t.conf)});return t};s.prototype.init=function(t){var e=this.conf=t||{};this.that=i(e.elem);delete e.elem;this.render(function(){this.event()});return this};return(new s).init(t).success(n,true)};t.date=function(){var n={query:e,date:t.util.date,isYear:function(t){return t%4===0&&t%100!==0||t%400===0},months:[31,null,31,30,31,30,31,31,30,31,30,31],className:{table:"nui-dropdown-date",curr:"_curr",toDay:"_today",next:"_next",prev:"_prev",_void:"_void",tools:"nui-dropdown-date__tools"}};n.table=function(){var t,e=[],i=["日","一","二","三","四","五","六"];var s={},r=document.createElement("table"),a=document.createElement("thead");a.appendChild(document.createElement("tr"));s.creath=function(t){var e=document.createElement("th");e.innerHTML=i[t];a.getElementsByTagName("tr")[0].appendChild(e);e=null};for(var o=0,c=6;o<c;o++){e.push([]);t=r.insertRow(0);for(var f=0,u=7;f<u;f++){e[o][f]=0;o===0&&s.creath(f);t.insertCell(f)}}r.insertBefore(a,r.children[0]);r.className=n.className.table;t=e=null;return r.outerHTML.toLowerCase()}();n.checkVoid=function(t,e,n,i){var s=[];t=t|0;e=e|0;n=n|0;if(t<i.min[0]){s=["y"]}else if(t>i.max[0]){s=["y",1]}else if(t>=i.min[0]&&t<=i.max[0]){if(t==i.min[0]){if(e<i.min[1]){s=["m"]}else if(e==i.min[1]){if(n<i.min[2]){s=["d"]}}}if(t==i.max[0]){if(e>i.max[1]){s=["m",1]}else if(e==i.max[1]){if(n>i.max[2]){s=["d",1]}}}}return s};n.viewDate=function(t,e,i,s){var r={},a=new Date;r.today=a.getDate();a.setFullYear(t,e,i);r.ymd=[a.getFullYear(),a.getMonth(),r.today];n.months[1]=n.isYear(r.ymd[0])?29:28;a.setFullYear(r.ymd[0],r.ymd[1],1);r.FDay=a.getDay();r.PDay=n.months[e===0?11:e-1]-r.FDay+1;r.NDay=1;var o=function(t,e){this.innerHTML=t;e&&(this.className=e)};n.query("td",this).each(function(t){var e=r.ymd[0],i=r.ymd[1]+1,a;if(t<r.FDay){a=t+r.PDay;o.call(this,a,n.className.prev);i===1&&(e-=1);i=i===1?12:i-1}else if(t>=r.FDay&&t<r.FDay+n.months[r.ymd[1]]){a=t-r.FDay+1;o.call(this,a);if(t-r.FDay+1===r.ymd[2]){r.thisDay=this}}else{a=r.NDay++;o.call(this,a,n.className.next);i===12&&(e+=1);i=i===12?1:i+1}r.today===a&&(this.className+=" "+n.className.toDay);if(s&&n.checkVoid(e,i,a,s)[0])this.className+=" "+n.className._void;this.setAttribute("y",e);this.setAttribute("m",i);this.setAttribute("d",a)})};return function(e,i){var s=n.query(e.elem);var r="input"===s[0].tagName.toLowerCase()?"focus":"click";s.on(r,function(){var r=(e.min||n.date.now()).split("-");nui.open({content:n.table,title:"<span><i></i><cite>"+r[0]+"</cite><em></em></span>"+"<span><i></i><cite>"+r[1]+"</cite><em></em></span>",type:4,time:0,width:"240px",elem:s,success:function(a,o){var c=this;var f=n.query("."+t.get.className.open+"-hd",c);f.addClass(n.className.tools);var u=n.query("."+t.get.className.open+"-bd",c);var l={min:e.min.split("-"),max:e.max.split("-")};var d=function(t,i,s){u.html(n.table);n.viewDate.call(c,t,--i,s,e.max?l:void 0)};n.query("span",f).each(function(){var t=n.query(this),i=n.query("i",this),s=n.query("cite",this),a=n.query("em",this),o=t.index(),c=parseInt(s.html());var f=function(t){c+=t;if(o){c>12&&(c=12);c<1&&(c=1);r[1]=c}else{if(e.max){var i=parseInt(l.min[0]);c<i&&(c=i)}r[0]=c}s.html(n.date.n2s(c));d.apply(null,r)};t.on("click","i",function(){f(-1)}).on("click","em",function(){f(+1)})});d.apply(null,r);n.query(this).on("click","td",function(){if(this.className.indexOf(n.className.next)!==-1||this.className.indexOf(n.className.prev)!==-1||this.className.indexOf(n.className._void)!==-1){}else{var r=n.date.format(new Date(this.getAttribute("y"),parseInt(this.getAttribute("m"))-1,this.getAttribute("d")),e.format);s.val(r);i&&i({min:e.min,max:e.max,format:e.format,curr:r});t.close(o)}})}})})}}();t.tab=function(){var t=e,n="#tab_",i=location.hash.split(n)[1],s=document.getElementById(i);if(s){var r=s.className.split(" ");t("[data-tab]").each(function(){var e=t(this),n=e.attr("data-tab");for(var s in r){if(r[s].indexOf(n)){n=n.split("|");if(n[3]){t(n[3],t(n[2])).each(function(s){if(this.id===i){t(n[0],e).eq(s).addClass(n[1]).siblings().removeClass(n[1]);t(this).show().siblings(n[3]).hide()}})}break}}})}return function(){var e=t(this),i=e.attr("data-tab").split("|");typeof i===typeof[]||(i=["a","this"]);t(i[0],e).on("click",function(){var s=t(this),r=s.index(),a=i[3];s.addClass(i[1]).siblings().removeClass(i[1]);a&&t(a,i[2]).eq(r).show().each(function(){if(this.id)location.hash=n+this.id}).siblings(a).hide();e.trigger("nui(tab)",{el:s,tab:t(a,i[2]),index:r})})}}();e("[data-tab]").each(function(){t.tab.call(this)});t.form({form:".nui-form"});return t};"function"===typeof define?define(function(e){var n=e("jquery");return t.init(n)}):window.nui=t.init($)})();